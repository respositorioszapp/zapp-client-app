"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[626],{3214:(B,E,s)=>{s.d(E,{P:()=>y});var n=s(5e3),e=s(7556),i=s(3769),T=s(9808),M=s(9928);function I(t,v){1&t&&(n.TgZ(0,"ion-thumbnail",3),n._UZ(1,"ion-skeleton-text",4),n.qZA())}function f(t,v){if(1&t){const u=n.EpF();n.TgZ(0,"ion-slide",7),n.NdJ("click",function(){const l=n.CHM(u).$implicit,P=n.oxw(2);return n.KtG(P.showProducts(l))}),n.TgZ(1,"ion-thumbnail",8),n._UZ(2,"img",9),n.qZA()()}if(2&t){const u=v.$implicit;n.xp6(2),n.Q6J("src",u.url_image_banner,n.LSH)}}function w(t,v){if(1&t&&(n.TgZ(0,"ion-slides",5),n.YNc(1,f,3,1,"ion-slide",6),n.qZA()),2&t){const u=n.oxw();n.Q6J("options",u.slideOpts4),n.xp6(1),n.Q6J("ngForOf",u.banners)}}let y=(()=>{class t{constructor(u,Z){this.auth=u,this.router=Z,this.slideOpts4={initialSlide:0,speed:400,slidesPerView:1,autoplay:{delay:1e4}}}ngOnInit(){console.log("Banners Loading",this.banners_loading)}showProducts(u){const Z=u.id?u.id:Number(u.seller_id);0!=Z&&(localStorage.setItem("back_route","tabs/home"),this.auth.setBack(!0),this.router.navigate(["tabs/show-products/"+Z]))}}return t.\u0275fac=function(u){return new(u||t)(n.Y36(e.e),n.Y36(i.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-banners"]],inputs:{banners:"banners",banners_loading:"banners_loading"},decls:4,vars:2,consts:[["size","12",1,"ion-no-padding"],["class","ion-text-center","style","display: block;width: 100%;height: 120px",4,"ngIf"],[3,"options",4,"ngIf"],[1,"ion-text-center",2,"display","block","width","100%","height","120px"],["animated",""],[3,"options"],["style","max-height: 120px;",3,"click",4,"ngFor","ngForOf"],[2,"max-height","120px",3,"click"],[1,"banner"],["alt","","srcset","",3,"src"]],template:function(u,Z){1&u&&(n.TgZ(0,"ion-row")(1,"ion-col",0),n.YNc(2,I,2,0,"ion-thumbnail",1),n.YNc(3,w,2,2,"ion-slides",2),n.qZA()()),2&u&&(n.xp6(2),n.Q6J("ngIf",Z.banners_loading),n.xp6(1),n.Q6J("ngIf",!Z.banners_loading))},dependencies:[T.sg,T.O5,M.wI,M.Nd,M.CK,M.A$,M.Hr,M.Bs],styles:[".banner[_ngcontent-%COMP%]{width:90%;background-repeat:no-repeat;background-size:100%;background-position:center;height:100%;border-radius:30px}.banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:120px;-o-object-fit:contain;object-fit:initial;border-radius:30px}"]}),t})()},3995:(B,E,s)=>{s.d(E,{F:()=>A});var n=s(655),e=s(3238),i=s(5e3),T=s(1335),M=s(7556),I=s(1892),f=s(8337),w=s(9808),y=s(9928);function t(h,F){if(1&h&&(i.TgZ(0,"ion-card-subtitle",13),i._uU(1),i.ALo(2,"currency"),i.qZA()),2&h){const d=i.oxw();i.xp6(1),i.hij("",i.gM2(2,1,d.product.regular_price,"","symbol","1.0")," ")}}function v(h,F){if(1&h&&(i.ynx(0),i._uU(1),i._UZ(2,"ion-icon",14),i.BQk()),2&h){const d=i.oxw();i.xp6(1),i.hij(" ",d.product.calification," ")}}function u(h,F){if(1&h&&(i.ynx(0),i._uU(1),i._UZ(2,"ion-icon",14),i.BQk()),2&h){const d=i.oxw(2);i.xp6(1),i.hij(" ",d.product.calification," ")}}function Z(h,F){if(1&h&&i.YNc(0,u,3,1,"ng-container",15),2&h){const d=i.oxw();i.Q6J("ngIf",!d.isOffer)}}function _(h,F){1&h&&(i.TgZ(0,"p",16),i._uU(1,"Agotado"),i.qZA())}const l=function(h){return{wishlist:h}},P=function(h){return{blur:h}};let A=(()=>{class h{constructor(d,g,m,x){this.request=d,this.auth=g,this.ui=m,this.error=x,this.isOffer=!1,this.shop_open=!0}ngOnInit(){this.product.product=this.product.product.replace("?","\xf1");const d=this.product.meta_data.find(m=>"_wapf_fieldgroup"==m.key);let g=[];if(d){const m=d.value.fields;m&&m.map(x=>{g.push({label:x.label,price:x.options.choices[0]?x.options.choices[0].pricing_amount:0,required:x.required,type:x.type,id:x.id,description:x.description,category_id:x.category_id,category_name:x.category_name})}),console.log("Metadata Extras Fields",g)}this.product.fields=g,this.findIsOnWishList()}wishList(){return(0,n.mG)(this,void 0,void 0,function*(){if(console.log("Wish"),this.product.wishlist){const d=yield this.ui.loading("Por favor espere...");this.request.get("/?option=wish_list&user_id="+this.auth.user.id+"&page=1&per_page=2",!0).subscribe(g=>{console.log("Res",g.data),g.data.length>0&&this.request.post("/?option=del_product_wish_list",{product_id:this.product.id,wishlist_id:g.data[0].ID},!0).subscribe(x=>(0,n.mG)(this,void 0,void 0,function*(){(yield d).dismiss(),this.product.wishlist=!1,this.productFavorites&&(this.productFavorites=this.productFavorites.filter(q=>q.id!=this.product.id))}),x=>(0,n.mG)(this,void 0,void 0,function*(){(yield d).dismiss()}))},g=>{console.log("Error",g)})}else{const d=yield this.ui.loading("Por favor espere...");this.request.get("/?option=wish_list&user_id="+this.auth.user.id+"&page=1&per_page=2",!0).subscribe(g=>{console.log("Res",g.data),g.data.length>0?this.request.post("/?option=add_product_wish_list",{product_id:this.product.id,quantity:1,user_id:this.auth.user.id,wishlist_id:g.data[0].ID},!0).subscribe(x=>(0,n.mG)(this,void 0,void 0,function*(){(yield d).dismiss(),this.product.wishlist=!0}),x=>(0,n.mG)(this,void 0,void 0,function*(){(yield d).dismiss()})):this.request.post("/?option=create_wish_list",{user_id:this.auth.user.id},!0).subscribe(x=>(0,n.mG)(this,void 0,void 0,function*(){this.request.post("/?option=add_product_wish_list",{product_id:this.product.id,quantity:1,user_id:this.auth.user.id,wishlist_id:x.data.ID},!0).subscribe(J=>(0,n.mG)(this,void 0,void 0,function*(){(yield d).dismiss(),this.product.wishlist=!0}),J=>(0,n.mG)(this,void 0,void 0,function*(){(yield d).dismiss(),console.log("Error add Product",J)}))}),x=>(0,n.mG)(this,void 0,void 0,function*(){(yield d).dismiss(),console.log("Error Create List",x),yield this.ui.presentAlert({mode:"ios",header:"No se pudo crear la lista",buttons:[{text:"Aceptar",role:"cancel",cssClass:"secondary",handler:q=>{}}]})}))},g=>{console.log("Error",g)})}})}findIsOnWishList(){this.request.get("/?option=wish_list&user_id="+this.auth.user.id+"&page=1&per_page=2",!0).subscribe(d=>{console.log("Res",d.data),this.request.get("/?option=find_product_in_wish_list&wishlist_id="+d.data[0].ID+"&prod_id="+this.product.id,!0).subscribe(g=>{this.product.wishlist=g.data.product_exists,console.log("Url Respuesta endpoint",g)})},d=>{console.log("Error",d)})}getPriceItem(d){return(Number(d.price)+Number(d.additional_price?d.additional_price:0))*Number(d.quantity)}showProduct(){return(0,n.mG)(this,void 0,void 0,function*(){(yield this.ui.presentModal(e.e,{product:this.product})).onDidDismiss().then(g=>{console.log("Cancel",g),g.data.cancel?this.product=g.data.product:(this.auth.person.total=0,this.auth.person.quantity=0,this.auth.person.cart_items&&this.auth.person.cart_items.length>0&&(console.log("Calculating"),this.auth.person.cart_items.map(m=>{console.log(`Total ${m.id}`,this.getPriceItem(m)),this.auth.person.total+=this.getPriceItem(m),this.auth.person.quantity+=m.quantity,this.auth.setPerson(this.auth.person)})))})})}}return h.\u0275fac=function(d){return new(d||h)(i.Y36(T.s),i.Y36(M.e),i.Y36(I.F),i.Y36(f.Y))},h.\u0275cmp=i.Xpm({type:h,selectors:[["product"]],inputs:{product:"product",isOffer:"isOffer",shop_open:"shop_open",productFavorites:"productFavorites"},decls:24,vars:19,consts:[["fill","clear",1,"wish",3,"click"],["name","heart-circle-outline",1,"not-in-wishlist",2,"position","absolute","right","0","font-size","x-large",3,"ngClass"],["mode","ios",1,"product"],[1,"product-detail"],["alt","",1,"image",3,"src","ngClass","click"],[1,"info"],["size","6"],["class","offer",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["class","spent",4,"ngIf"],["size","6",1,"ion-text-right"],[3,"click"],[1,"offer"],["name","star",2,"color","#ecec3e"],[4,"ngIf"],[1,"spent"]],template:function(d,g){if(1&d&&(i.TgZ(0,"ion-button",0),i.NdJ("click",function(){return g.wishList()}),i._UZ(1,"ion-icon",1),i.qZA(),i.TgZ(2,"ion-card",2)(3,"ion-card-content",3)(4,"img",4),i.NdJ("click",function(){return g.showProduct()}),i.qZA(),i.TgZ(5,"div",5)(6,"h3"),i._uU(7),i.qZA(),i.TgZ(8,"h5"),i._uU(9),i.qZA(),i.TgZ(10,"ion-row")(11,"ion-col",6),i.YNc(12,t,3,6,"ion-card-subtitle",7),i.TgZ(13,"ion-card-subtitle"),i._uU(14),i.ALo(15,"currency"),i.qZA(),i.TgZ(16,"ion-card-subtitle"),i.YNc(17,v,3,1,"ng-container",8),i.YNc(18,Z,1,1,"ng-template",null,9,i.W1O),i.qZA(),i.YNc(20,_,2,0,"p",10),i.qZA(),i.TgZ(21,"ion-col",11)(22,"ion-button",12),i.NdJ("click",function(){return g.showProduct()}),i._uU(23,"Ver"),i.qZA()()()()()()),2&d){const m=i.MAs(19);i.xp6(1),i.Q6J("ngClass",i.VKq(15,l,g.product.wishlist)),i.xp6(3),i.Q6J("src",g.product.image,i.LSH)("ngClass",i.VKq(17,P,0==g.product.available)),i.xp6(3),i.Oqu(g.product.business),i.xp6(2),i.Oqu(g.product.product),i.xp6(3),i.Q6J("ngIf",g.isOffer),i.xp6(2),i.hij("",i.gM2(15,10,g.product.price,"","symbol","1.0")," "),i.xp6(3),i.Q6J("ngIf",g.product.categories)("ngIfElse",m),i.xp6(3),i.Q6J("ngIf",0==g.product.available)}},dependencies:[w.mk,w.O5,y.YG,y.PM,y.FN,y.tO,y.wI,y.gu,y.Nd,w.H9],styles:[".not-in-wishlist[_ngcontent-%COMP%]{color:#666}.wishlist[_ngcontent-%COMP%]{color:#462688}.blur[_ngcontent-%COMP%]{filter:blur(4px)}.spent[_ngcontent-%COMP%]{border:1px solid #151515;text-align:center;left:0;right:0;width:100%;color:#131313;bottom:0;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;text-transform:uppercase;border-radius:10px;margin:auto}.wish[_ngcontent-%COMP%]{position:absolute;right:10px;font-size:x-large;width:24px;height:24px;z-index:1000000;top:-3px}.product[_ngcontent-%COMP%]{display:flex;width:100%;margin:10px 0 0;text-align:right}.product[_ngcontent-%COMP%]   .product-detail[_ngcontent-%COMP%]{display:flex;padding:0;width:100%}.product[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:block;width:170px;height:200px;-o-object-fit:contain;object-fit:initial}.product[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:70%;padding:5px;text-align:left}.product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:first-child{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;max-height:69px}.product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:first-child   ion-card-subtitle[_ngcontent-%COMP%]{display:inline}.product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:first-child   ion-card-subtitle.offer[_ngcontent-%COMP%]{text-decoration:line-through;padding-right:4px;color:#969696}.product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:first-child   ion-card-subtitle[_ngcontent-%COMP%]:nth-child(2){margin-left:10px}.product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:first-child   ion-card-subtitle[_ngcontent-%COMP%]:nth-child(2)   ion-icon[_ngcontent-%COMP%]{color:#ecec3e}.product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:nth-child(2){height:inherit;max-height:50px}.product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:nth-child(2)   ion-button[_ngcontent-%COMP%]{padding:10px}"]}),h})()},9544:(B,E,s)=>{s.d(E,{r:()=>v});var n=s(655),e=s(5e3),i=s(1892),T=s(1335),M=s(9808),I=s(4182),f=s(9928),w=s(3214);const y=function(u){return{"category-selected":u}};function t(u,Z){if(1&u){const _=e.EpF();e.ynx(0),e.TgZ(1,"ion-slide",23),e.NdJ("click",function(){const A=e.CHM(_).$implicit,h=e.oxw();return e.KtG(h.selectCategory(A))}),e.TgZ(2,"ion-grid")(3,"ion-row")(4,"ion-col",24)(5,"ion-thumbnail"),e._UZ(6,"ion-img",25),e.qZA()()(),e.TgZ(7,"ion-row",26)(8,"ion-col",24)(9,"ion-label",27),e._uU(10),e.qZA()()()()(),e.BQk()}if(2&u){const _=Z.$implicit,l=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,y,_.id==l.category)),e.xp6(5),e.Q6J("src",_.image?_.image.src:""),e.xp6(4),e.Oqu(_.name)}}let v=(()=>{class u{constructor(_,l){this.ui=_,this.request=l,this.slideOpts2={initialSlide:0,speed:400,slidesPerView:4},this.slideOpts3={initialSlide:0,speed:400,slidesPerView:4},this.array2=[{image:"assets/imgs/promotions.png",text:"Promociones",type:"image",route:"tabs/offers"},{image:"assets/imgs/zapp-m.png",text:"Mensajer\xeda",type:"image",route:"tabs/transport-type"},{image:"assets/imgs/trending.png",text:"Tendencias",type:"image"},{image:"assets/imgs/new-products.png",text:"Lo nuevo",type:"image"}],this.max=1e3,this.min=1e3,this.category=0,this.categories=[],this.filters={search:null,category:null,min_price:null,max_price:null,attribute:null,attribute_term:null},this.banners=[],this.banners_loading=!1}ngOnInit(){this.slideOpts2.slidesPerView=4}get categoriesSorted(){const _=this.categories.find(l=>l.id==this.filters.search);return _?[_,...this.categories.filter(l=>l.id!=_.id)]:this.categories}ionViewWillEnter(){return(0,n.mG)(this,void 0,void 0,function*(){console.log("Ion Cycle Will enter"),this.slideOpts2={initialSlide:0,speed:400,slidesPerView:4},localStorage.getItem("filters")&&(this.filters=JSON.parse(localStorage.getItem("filters")),this.category=this.filters.category,this.min=null!=this.filters.min_price&&this.filters.min_price>1e3?this.filters.min_price:1e3,this.max=null!=this.filters.max_price&&this.filters.max_price>1e3?this.filters.max_price:1e3);const _=yield this.ui.loading("Por favor espere...");this.request.get("/?option=products/categories&page=1&per_page=100",!0).subscribe(l=>(0,n.mG)(this,void 0,void 0,function*(){console.log("Categor\xedas",l),l.data=l.data.filter(P=>15!=P.id),l.data=l.data.map(P=>{switch(P.id){case 107:P.icon="casera";break;case 106:P.icon="hamburger-r";break;case 115:P.icon="shops";break;default:P.icon="home"}return P}),this.categories=l.data.filter(P=>0!=P.parent),(yield _).dismiss()}),l=>(0,n.mG)(this,void 0,void 0,function*(){(yield _).dismiss(),console.log("Err",l)})),this.banners_loading=!0,this.request.get("/?option=banners&page=1&per_page=10",!0).subscribe(l=>{this.banners_loading=!1,this.banners=l.data},l=>{this.banners_loading=!1})})}selectCategory(_){console.log("Category",_),this.category=_.id}dismiss(_){this.ui.dismiss(_)}applyFilters(){this.filters.min_price=null!=this.min&&this.min>1e3?this.min:null,this.filters.max_price=null!=this.max&&this.max>1e3?this.max:null,this.filters.category=null!=this.category&&0!=this.category?this.category:null,console.log("Filters",this.filters),localStorage.setItem("filters",JSON.stringify(this.filters)),this.dismiss()}clearFilter(){this.filters={search:null,category:null,min_price:null,max_price:null,attribute:null,attribute_term:null},this.min=1e3,this.max=1e3,this.category=0,localStorage.removeItem("filters"),this.dismiss()}}return u.\u0275fac=function(_){return new(_||u)(e.Y36(i.F),e.Y36(T.s))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-filters"]],decls:48,vars:10,consts:[["mode","ios",1,"primary-yellow-background","rounded-toolbar",2,"position","relative"],["lines","none",1,"primary-yellow-background"],[1,"primary-yellow-background",3,"click"],["slot","start","name","arrow-back-outline"],["src","assets/imgs/logo zapp.png",1,"ion-text-center",2,"width","100px","height","60px","margin","auto"],[3,"banners","banners_loading"],[1,"subtitle"],[2,"width","90%","margin","auto"],["size","9"],["lines","none",1,"ion-no-padding","price-item"],["min","1000","max","100000","mode","ios","color","primary","step","1000",3,"ngModel","ngModelChange"],["slot","start"],["slot","end"],["size","3"],["lines","none"],["max","100000","color","primary","mode","ios","step","1000",3,"min","ngModel","ngModelChange"],[1,"ion-text-center",2,"width","100%"],["fill","clear",1,"button-clear",3,"click"],[1,"title",2,"margin-left","5px"],["size","12",2,"margin","auto"],[3,"options"],[4,"ngFor","ngForOf"],["color","primary","expand","block",3,"click"],[1,"slide-categories",3,"ngClass","click"],["size","12"],[3,"src"],[1,"reversed-top"],[2,"font-size","1em"]],template:function(_,l){1&_&&(e.TgZ(0,"ion-toolbar",0)(1,"ion-item",1)(2,"ion-button",2),e.NdJ("click",function(){return l.dismiss({cancel:!0})}),e._UZ(3,"ion-icon",3),e.qZA(),e.TgZ(4,"ion-title"),e._UZ(5,"ion-img",4),e.qZA()()(),e.TgZ(6,"ion-content"),e._UZ(7,"app-banners",5),e.TgZ(8,"ion-row")(9,"h6",6),e._uU(10,"Precio m\xednimo"),e.qZA(),e.TgZ(11,"ion-row",7)(12,"ion-col",8)(13,"ion-item",9)(14,"ion-range",10),e.NdJ("ngModelChange",function(A){return l.min=A}),e.TgZ(15,"ion-label",11),e._uU(16,"1000"),e.qZA(),e.TgZ(17,"ion-label",12),e._uU(18,"100000"),e.qZA()()()(),e.TgZ(19,"ion-col",13)(20,"ion-item",14)(21,"ion-label"),e._uU(22),e.qZA()()()(),e.TgZ(23,"h6",6),e._uU(24,"Precio m\xe1ximo"),e.qZA(),e.TgZ(25,"ion-row",7)(26,"ion-col",8)(27,"ion-item",9)(28,"ion-range",15),e.NdJ("ngModelChange",function(A){return l.max=A}),e.TgZ(29,"ion-label",11),e._uU(30),e.qZA(),e.TgZ(31,"ion-label",12),e._uU(32,"100000"),e.qZA()()()(),e.TgZ(33,"ion-col",13)(34,"ion-item",14)(35,"ion-label"),e._uU(36),e.qZA()()()(),e.TgZ(37,"ion-row",16)(38,"ion-button",17),e.NdJ("click",function(){return l.clearFilter()}),e._uU(39," Limpiar Filtros "),e.qZA()(),e.TgZ(40,"h5",18),e._uU(41,"Categor\xedas"),e.qZA(),e.TgZ(42,"ion-col",19)(43,"ion-slides",20),e.YNc(44,t,11,5,"ng-container",21),e.qZA()()()(),e.TgZ(45,"ion-footer")(46,"ion-button",22),e.NdJ("click",function(){return l.applyFilters()}),e._uU(47," Aplicar "),e.qZA()()),2&_&&(e.xp6(7),e.Q6J("banners",l.banners)("banners_loading",l.banners_loading),e.xp6(7),e.Q6J("ngModel",l.min),e.xp6(8),e.hij(" ",l.min," "),e.xp6(6),e.Q6J("min",l.min)("ngModel",l.max),e.xp6(2),e.Oqu(l.min),e.xp6(6),e.hij(" ",l.max," "),e.xp6(7),e.Q6J("options",l.slideOpts3),e.xp6(1),e.Q6J("ngForOf",l.categories))},dependencies:[M.mk,M.sg,I.JJ,I.On,f.YG,f.wI,f.W2,f.fr,f.jY,f.gu,f.Xz,f.Ie,f.Q$,f.I_,f.Nd,f.A$,f.Hr,f.Bs,f.sr,f.wd,f.QI,w.P],styles:[".category-selected[_ngcontent-%COMP%]{background:#69019c!important;color:#b1ff00!important}.rounded-toolbar[_ngcontent-%COMP%]{border-bottom-left-radius:20px;border-bottom-right-radius:20px}.rounded-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: blueviolet}.subtitle[_ngcontent-%COMP%]{margin-left:10px;font-weight:700}.button-clear[_ngcontent-%COMP%]{margin:10px auto;background:#a1e110;border-radius:20px;padding:10px;text-transform:capitalize}.price-item[_ngcontent-%COMP%]{width:100%;padding:5px;background:#f2f2f2;border-radius:20px;--padding-end: 0px;--inner-padding-end: 0px}.price-item[_ngcontent-%COMP%]   ion-range[_ngcontent-%COMP%]{background:#f2f2f2;width:100%;--knob-size: 20px}.slide-categories[_ngcontent-%COMP%]{min-height:93px;min-width:100px;max-width:30%;border-radius:10px}.slide-categories[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding:0}.slide-categories[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{padding:0}.slide-categories[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row.reversed-top[_ngcontent-%COMP%]{margin-top:-10px}.slide-categories[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row.reversed-top[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.65em!important}.slide-categories[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{border-radius:20px;width:100%;min-width:91px;--border-radius: 20px;height:90px;max-height:90px}.slide-categories[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;border-radius:10px;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}.slide-categories[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto!important;max-width:100%}.slide-categories[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px;max-height:50px;min-height:50px;width:100%;min-width:90px;border-radius:20px}"]}),u})()},626:(B,E,s)=>{s.r(E),s.d(E,{FiltersSearchPageModule:()=>G});var n=s(9808),e=s(4182),i=s(9928),T=s(3769),M=s(655),I=s(9544),f=s(3238),w=s(7423);const y=(0,w.fo)("Keyboard");var t=s(5e3),v=s(1892),u=s(1335),Z=s(8337),_=s(7556),l=s(3995),P=s(3214);const A=["searchElemnt"];function h(r,O){if(1&r&&t._UZ(0,"app-banners",12),2&r){const o=t.oxw();t.Q6J("banners",o.banners)("banners_loading",o.banners_loading)}}function F(r,O){1&r&&(t.TgZ(0,"p",13),t._uU(1,"PROHIBIDO EL EXPENDIO DE BEBIDAS ALCOHOLICAS A MENORES DE EDAD"),t.qZA())}function d(r,O){if(1&r&&(t.ynx(0),t.TgZ(1,"ion-badge",14),t._uU(2),t.qZA(),t.BQk()),2&r){const o=t.oxw();t.xp6(2),t.Oqu(o.activeFilters)}}function g(r,O){1&r&&(t.TgZ(0,"h5",19),t._uU(1,"Promociones"),t.qZA())}function m(r,O){if(1&r){const o=t.EpF();t.TgZ(0,"ion-slide",20),t.NdJ("click",function(){const C=t.CHM(o).$implicit,D=t.oxw(2);return t.KtG(D.showProduct(C))}),t._UZ(1,"ion-icon",21),t.TgZ(2,"ion-grid")(3,"ion-row")(4,"ion-thumbnail",22),t._UZ(5,"img",23),t.qZA()(),t.TgZ(6,"ion-row")(7,"ion-col",16)(8,"p",24),t._uU(9),t.ALo(10,"titlecase"),t.qZA()()(),t.TgZ(11,"ion-row")(12,"ion-col",16)(13,"p",25),t._uU(14),t.ALo(15,"currency"),t.qZA()()()()()}if(2&r){const o=O.$implicit;t.xp6(5),t.Q6J("src",o.image,t.LSH),t.xp6(4),t.Oqu(t.lcZ(10,3,o.product)),t.xp6(5),t.Oqu(t.gM2(15,5,o.price,"","symbol","1.0"))}}function x(r,O){if(1&r&&(t.TgZ(0,"ion-row"),t.YNc(1,g,2,0,"h5",15),t.TgZ(2,"ion-col",16)(3,"ion-slides",17),t.YNc(4,m,16,10,"ion-slide",18),t.qZA()()()),2&r){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.feautured_products.length>0),t.xp6(2),t.Q6J("options",o.slideOpts),t.xp6(1),t.Q6J("ngForOf",o.feautured_products)}}function q(r,O){if(1&r&&(t.TgZ(0,"div",27),t._UZ(1,"product",28),t.qZA()),2&r){const o=O.$implicit;t.xp6(1),t.Q6J("product",o)}}function J(r,O){if(1&r&&(t.ynx(0),t.YNc(1,q,2,1,"div",26),t.BQk()),2&r){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.array3)}}function Y(r,O){1&r&&(t.ynx(0),t._UZ(1,"img",29),t.TgZ(2,"h3",30),t._uU(3,"No hay productos con este criterio"),t.qZA(),t.BQk())}function K(r,O){1&r&&(t.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-thumbnail",31),t._UZ(3,"ion-skeleton-text",32),t.qZA(),t.TgZ(4,"ion-label")(5,"h3"),t._UZ(6,"ion-skeleton-text",33),t.qZA(),t.TgZ(7,"p"),t._UZ(8,"ion-skeleton-text",34),t.qZA(),t.TgZ(9,"p"),t._UZ(10,"ion-skeleton-text",35),t.qZA()()(),t.TgZ(11,"ion-item")(12,"ion-thumbnail",31),t._UZ(13,"ion-skeleton-text",32),t.qZA(),t.TgZ(14,"ion-label")(15,"h3"),t._UZ(16,"ion-skeleton-text",33),t.qZA(),t.TgZ(17,"p"),t._UZ(18,"ion-skeleton-text",34),t.qZA(),t.TgZ(19,"p"),t._UZ(20,"ion-skeleton-text",35),t.qZA()()(),t.TgZ(21,"ion-item")(22,"ion-thumbnail",31),t._UZ(23,"ion-skeleton-text",32),t.qZA(),t.TgZ(24,"ion-label")(25,"h3"),t._UZ(26,"ion-skeleton-text",33),t.qZA(),t.TgZ(27,"p"),t._UZ(28,"ion-skeleton-text",34),t.qZA(),t.TgZ(29,"p"),t._UZ(30,"ion-skeleton-text",35),t.qZA()()(),t.TgZ(31,"ion-item")(32,"ion-thumbnail",31),t._UZ(33,"ion-skeleton-text",32),t.qZA(),t.TgZ(34,"ion-label")(35,"h3"),t._UZ(36,"ion-skeleton-text",33),t.qZA(),t.TgZ(37,"p"),t._UZ(38,"ion-skeleton-text",34),t.qZA(),t.TgZ(39,"p"),t._UZ(40,"ion-skeleton-text",35),t.qZA()()(),t.TgZ(41,"ion-item")(42,"ion-thumbnail",31),t._UZ(43,"ion-skeleton-text",32),t.qZA(),t.TgZ(44,"ion-label")(45,"h3"),t._UZ(46,"ion-skeleton-text",33),t.qZA(),t.TgZ(47,"p"),t._UZ(48,"ion-skeleton-text",34),t.qZA(),t.TgZ(49,"p"),t._UZ(50,"ion-skeleton-text",35),t.qZA()()(),t.TgZ(51,"ion-item")(52,"ion-thumbnail",31),t._UZ(53,"ion-skeleton-text",32),t.qZA(),t.TgZ(54,"ion-label")(55,"h3"),t._UZ(56,"ion-skeleton-text",33),t.qZA(),t.TgZ(57,"p"),t._UZ(58,"ion-skeleton-text",34),t.qZA(),t.TgZ(59,"p"),t._UZ(60,"ion-skeleton-text",35),t.qZA()()()())}const R=[{path:"",component:(()=>{class r{constructor(o,c,a,C){this.ui=o,this.http=c,this.error=a,this.auth=C,this.searchFilter="",this.dataParams={total:0,per_page:5,page:1,filters:[]},this.slideOpts={initialSlide:0,speed:400,slidesPerView:3,autoplay:{delay:2e3}},this.feautured_products=[],this.categories=[],this.loading=!1,this.filters={search:null,category:null,min_price:null,max_price:null,attribute:null,attribute_term:null},this.banners_loading=!1,this.banners=[],this.array3=[]}ngOnInit(){}ngAfterViewInit(){}ionViewWillEnter(){return(0,M.mG)(this,void 0,void 0,function*(){this.getFilters(),this.saveFilters(),this.banners_loading=!0,this.http.get("/?option=banners&page=1&per_page=10",!0).subscribe(o=>{this.banners_loading=!1,console.log("Banners",o.data),this.banners=o.data},o=>{this.banners_loading=!1}),this.http.get("/?featured=true&page=1&per_page=10&option=products_by_featured",!0).subscribe(o=>{this.feautured_products=[],console.log("Productos Destacados",o);const c=o.data;c&&c.forEach(a=>{console.log("Producto",a);const C=a.meta_data.find(k=>"_wapf_fieldgroup"==k.key);let D=[];if(C){const k=C.value.fields;k&&k.map(p=>{D.push({label:p.label,price:p.options.choices[0]?Number(p.options.choices[0].pricing_amount):0,required:p.required,type:p.type,id:p.id,category_id:p.category_id,category_name:p.category_name})}),console.log("Medata Extras Fields",D)}const b={id:a.id,image:a.images[0]?a.images[0].src:"assets/imgs/sinimagen.png",business:a.store?a.store.shop_name:"Mc Donalds",product:a.name?a.name.replace("?","\xf1"):"",description:a.description?a.description:a.short_description?a.short_description:"Sin descripci\xf3n",price:a.price?a.price:2e4,time:"40-45 min",calification:"4.7",comments:"",store:a.store?a.store:{},fields:D,available:"instock"==a.stock_status,meta_data:a.meta_data,images:a.images};this.feautured_products.push(b)},a=>{this.feautured_products=[]}),console.log("Products Featured Array",this.feautured_products)}),this.infiniteScroll.disabled=!1,this.loadData(!0)})}showProduct(o){return(0,M.mG)(this,void 0,void 0,function*(){(yield this.ui.presentModal(f.e,{product:o})).onDidDismiss().then(a=>{console.log("Cancel",a),a.data.cancel?o=a.data.product:(this.auth.person.total=0,this.auth.person.quantity=0,this.auth.person.cart_items&&this.auth.person.cart_items.length>0&&this.auth.person.cart_items.map(C=>{this.auth.person.total+=Number(C.quantity)*(Number(C.price)+(C.additional_price?Number(C.additional_price):0)),this.auth.person.quantity+=C.quantity,this.auth.setPerson(this.auth.person)}))})})}focusGone(){"web"!=w.dV.platform&&y.hide()}saveFilters(){localStorage.setItem("filters",JSON.stringify(this.filters))}getFilters(){this.filters=localStorage.getItem("filters")?JSON.parse(localStorage.getItem("filters")):{search:null,category:null,min_price:null,max_price:null,attribute:null,attribute_term:null}}get activeFilters(){let o=0;return Object.keys(this.filters).map(c=>{null!=this.filters[c]&&o++}),o++}clearFilter(){this.filters.search=null,this.filters.attribute=null,this.filters.attribute_term=null,this.filters.category=null,this.filters.max_price=null,this.filters.min_price=null,localStorage.removeItem("filters")}search(){this.infiniteScroll.disabled=!1,this.searchFilter?(this.clearFilter(),this.filters.search=this.searchFilter,this.saveFilters(),this.infiniteScroll.disabled=!1,this.loadData(!0)):(this.infiniteScroll.disabled=!1,this.filters.search=null,this.saveFilters(),this.array3=[])}loadData(o,c){return(0,M.mG)(this,void 0,void 0,function*(){if(this.infiniteScroll.disabled=!1,o||this.dataParams.page++,o){const k=Object.keys(this.filters).find(p=>null!=this.filters[p]);if(this.array3=[],this.dataParams.page=1,!k)return}let a;console.log("Loader init",a),this.loading=!0;let C={};Object.keys(this.filters).map(b=>{null!=this.filters[b]&&(b.includes("price")&&(this.filters[b]=this.filters[b].toString()),C[b]=this.filters[b])});let D={filters:C};console.log("Objeto a enviar",C),console.log("Url","/?option=filter_products&page="+this.dataParams.page+"&per_page=10"),this.http.post("/?option=filter_products&page="+this.dataParams.page+"&per_page=40",D,!0).subscribe(b=>(0,M.mG)(this,void 0,void 0,function*(){this.loading=!1,console.log("Loader",a),console.log("Products",b.data),b.data.forEach(p=>{console.log("Producto",p);const N=p.meta_data.find(S=>"_wapf_fieldgroup"==S.key);let Q=[];if(N){const S=N.value.fields;S&&S.map(U=>{Q.push({label:U.label,price:U.options.choices[0]?U.options.choices[0].pricing_amount:0,required:U.required,type:U.type,id:U.id,category_id:U.category_id,category_name:U.category_name})}),console.log("Medata Extras Fields",Q)}const L={id:p.id,image:p.images[0]?p.images[0].src:"assets/imgs/sinimagen.png",business:p.store?p.store.shop_name:"Mc Donalds",product:p.name,description:p.description?p.description:p.short_description?p.short_description:"Sin descripci\xf3n",price:p.price?p.price:2e4,time:"40-45 min",calification:"4.7",comments:"",categories:p.categories,store:p.store?p.store:{},fields:Q,available:"instock"==p.stock_status,meta_data:p.meta_data,images:p.images};this.array3.find(S=>S.id==L.id)||this.array3.push(L)}),this.array3=this.array3.sort((p,N)=>p.price-N.price),console.log("Products Array",this.array3),c&&(console.log("Event",c),c.target.complete(),b.data.length<=0&&(c.target.disabled=!0))}),b=>(0,M.mG)(this,void 0,void 0,function*(){console.log("error",b),this.loading=!1,c.target.complete(),c&&b.status&&400==b.status?c.target.disabled=!0:((yield a).dismiss(),b.status||this.error.response(b),b.status&&400!=b.status&&this.error.response(b))}))})}viewFilters(){return(0,M.mG)(this,void 0,void 0,function*(){(yield this.ui.presentModal(I.r)).onDidDismiss().then(c=>{console.log("Data Cancel",c),c.data||(this.getFilters(),this.loadData(!0))})})}}return r.\u0275fac=function(o){return new(o||r)(t.Y36(v.F),t.Y36(u.s),t.Y36(Z.Y),t.Y36(_.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-filters-search"]],viewQuery:function(o,c){if(1&o&&(t.Gf(A,7),t.Gf(i.ju,5)),2&o){let a;t.iGM(a=t.CRH())&&(c.searchElemnt=a.first),t.iGM(a=t.CRH())&&(c.infiniteScroll=a.first)}},decls:18,vars:8,consts:[[3,"banners","banners_loading",4,"ngIf"],["style","    padding: 5px;\n  margin-bottom: 0;",4,"ngIf"],[2,"width","90%","margin","auto"],["size","10"],["mode","ios","placeholder","\xbfQu\xe9 quieres hoy...?","searchIcon","find",2,"padding","0",3,"ngModel","ngModelChange"],["searchElemnt",""],["size","2"],["mode","ios","fill","clear",2,"position","relative",3,"click"],["name","filter-outline"],[4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],[3,"banners","banners_loading"],[2,"padding","5px","margin-bottom","0"],["color","primary",2,"position","absolute","right","-18px","top","0"],["class","title",4,"ngIf"],["size","12"],[3,"options"],["class","slide","style","position: relative;",3,"click",4,"ngFor","ngForOf"],[1,"title"],[1,"slide",2,"position","relative",3,"click"],["name","star",2,"color","#ecec3e","position","absolute","top","-4px","right","10px","font-size","1.2em"],[2,"width","100%","height","90%"],[3,"src"],[2,"white-space","nowrap","text-overflow","ellipsis","max-width","120px","display","block","overflow","hidden","margin","0"],[2,"white-space","nowrap","text-overflow","ellipsis","max-width","120px","display","block","overflow","hidden","font-weight","bold","text-align","left","margin","0"],["style","position: relative;",4,"ngFor","ngForOf"],[2,"position","relative"],[3,"product"],["src","assets/imgs/no_products.gif","alt","",2,"height","400px"],[1,"ion-text-center"],["slot","start"],["animated",""],["animated","",2,"width","50%"],["animated","",2,"width","80%"],["animated","",2,"width","60%"]],template:function(o,c){1&o&&(t.TgZ(0,"ion-content"),t.YNc(1,h,1,2,"app-banners",0),t.YNc(2,F,2,0,"p",1),t.TgZ(3,"div",2)(4,"ion-row")(5,"ion-col",3)(6,"ion-searchbar",4,5),t.NdJ("ngModelChange",function(C){return c.searchFilter=C})("ngModelChange",function(){return c.search()}),t.qZA()(),t.TgZ(8,"ion-col",6)(9,"ion-button",7),t.NdJ("click",function(){return c.viewFilters()}),t._UZ(10,"ion-icon",8),t.YNc(11,d,3,1,"ng-container",9),t.qZA()()()(),t.YNc(12,x,5,3,"ion-row",9),t.YNc(13,J,2,1,"ng-container",9),t.YNc(14,Y,4,0,"ng-container",9),t.YNc(15,K,61,0,"ion-list",9),t.TgZ(16,"ion-infinite-scroll",10),t.NdJ("ionInfinite",function(C){return c.loadData(!1,C)}),t._UZ(17,"ion-infinite-scroll-content",11),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("ngIf",!c.searchFilter&&0==c.array3.length),t.xp6(1),t.Q6J("ngIf",c.filters&&(118==c.filters.category||163==c.filters.category)),t.xp6(4),t.Q6J("ngModel",c.searchFilter),t.xp6(5),t.Q6J("ngIf",c.activeFilters>0),t.xp6(1),t.Q6J("ngIf",!c.searchFilter&&0==c.array3.length),t.xp6(1),t.Q6J("ngIf",c.array3.length>0),t.xp6(1),t.Q6J("ngIf",0==c.array3.length&&c.searchFilter&&!c.loading),t.xp6(1),t.Q6J("ngIf",c.loading))},dependencies:[n.sg,n.O5,e.JJ,e.On,i.yp,i.YG,i.wI,i.W2,i.jY,i.gu,i.ju,i.MB,i.Ie,i.Q$,i.q_,i.Nd,i.VI,i.CK,i.A$,i.Hr,i.Bs,i.j9,l.F,P.P,n.rS,n.H9],styles:[".item-search[_ngcontent-%COMP%]{background:white;color:#000;border-radius:2x0px;padding:0!important;margin-top:10px;height:40px;width:80%;border:.5px solid #CCCCCC}.slide[_ngcontent-%COMP%]{min-height:93px;min-width:125px}.slide[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding:0}.slide[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{padding:0}.slide[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row.reversed-top[_ngcontent-%COMP%]{margin-top:-20px}.slide-categories[_ngcontent-%COMP%]{min-height:93px;min-width:100px;max-width:30%}.slide-categories.none-max-width[_ngcontent-%COMP%]{max-width:none}.slide-categories[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:20px;min-height:86px;max-height:86px;-o-object-fit:cover;object-fit:cover}.slide-categories[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding:0}.slide-categories[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{padding:0}.slide-categories[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row.reversed-top[_ngcontent-%COMP%]{margin-top:-20px}ion-thumbnail.banner[_ngcontent-%COMP%]{width:100%;height:200px;max-height:300px}ion-thumbnail.banner[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%}.slide[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:100%;height:100%}.search-bar[_ngcontent-%COMP%]{--border-radius: 20px}.banner[_ngcontent-%COMP%]{width:100%;background-repeat:no-repeat;background-size:100%;background-position:center;height:100%;border-radius:30px}.slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:20px;width:120px;height:100px}.red-color[_ngcontent-%COMP%]{color:#dc143c}.title[_ngcontent-%COMP%]{font-weight:700;margin-left:5px}.item-search[_ngcontent-%COMP%]{background:white;color:#000;border-radius:30px;padding:0!important;margin-top:10px;height:40px;border:.5px solid #CCCCCC}.item-search[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0;color:#ccc}.item-search[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin:0 0 5px}"]}),r})()}];let j=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[T.Bz.forChild(R),T.Bz]}),r})();var W=s(8412);let G=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[n.ez,e.u5,i.Pc,j,W.j]}),r})()}}]);