"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8745,2522,7628,8006],{2522:(f,g,a)=>{a.d(g,{v:()=>l});var u=a(5e3),h=a(9928);let l=(()=>{class d{constructor(){this.step=1,this.percent=0}ngOnInit(){console.log("Stepper ng oninit"),localStorage.getItem("step")&&(this.step=Number(localStorage.getItem("step")),this.percent=Number(this.step/8))}}return d.\u0275fac=function(t){return new(t||d)},d.\u0275cmp=u.Xpm({type:d,selectors:[["app-stepper"]],decls:1,vars:1,consts:[[2,"height","5px","--background","transparent","min-width","100%",3,"value"]],template:function(t,p){1&t&&u._UZ(0,"ion-progress-bar",0),2&t&&u.Q6J("value",p.percent)},dependencies:[h.X7],styles:[".stepper[_ngcontent-%COMP%]{margin:0;padding:30px 0 0;list-style:none;color:#dbdbdb;display:table;table-layout:fixed;width:100%;font-size:.8em}.stepper[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:table-cell;text-align:center;position:relative}.step-icon[_ngcontent-%COMP%]{background-color:#dce1f2!important;border-radius:50%;height:20px;width:20px;text-align:center;flex-shrink:0;position:relative;font-weight:500;color:#49158c;margin:0 auto}.step-icon-active[_ngcontent-%COMP%]{background-color:#49158c!important;color:#fff!important}.step-icon-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.step-horizontal-line[_ngcontent-%COMP%]{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin-bottom:10px;min-width:30px;border-top-color:#0000001f}"]}),d})()},8745:(f,g,a)=>{a.r(g),a.d(g,{SelectCityPageModule:()=>M});var u=a(9808),h=a(4182),l=a(9928),d=a(3769),s=a(655),t=a(5e3),p=a(1335),m=a(1892),_=a(7556),y=a(2522);function b(i,c){if(1&i&&(t.TgZ(0,"ion-select-option",13),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.name)}}function v(i,c){if(1&i&&(t.TgZ(0,"ion-select-option",13),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.name)}}function C(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"ion-select",14),t.NdJ("ngModelChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeBranch())})("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.quotation.branch_office_id=n)}),t.YNc(1,v,2,2,"ion-select-option",5),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("interfaceOptions",e.customAlertOptions)("ngModel",e.quotation.branch_office_id)("selectedText",e.branch_office.name),t.xp6(1),t.Q6J("ngForOf",e.branches)}}const x=[{path:"",component:(()=>{class i{constructor(e,o,n,r){this.request=e,this.ui=o,this.router=n,this.auth=r,this.customAlertOptions={header:"Seleccione una ciudad",cssClass:"custom-alert"},this.branches=[],this.quotation={},this.loading=!1,this.cities_array=[],this.city={id:2,name:"Bogot\xe1 DC"},this.branch_office={id:1,customer_id:1,name:"",address:"Cra. 30 #2837, Barranquilla, Atl\xe1ntico, Colombia",latitude:"10.968245080344",longitude:"-74.77960338623",description:"sede 1",contact_name:"juan",contact_phone:"55",status:1,created_at:"2020-12-18T19:16:03.000000Z",updated_at:"2020-12-18T19:16:03.000000Z",city_id:4,city_name:"Barranquilla",state_name:"Atl\xe1ntico"}}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){localStorage.setItem("step","3"),localStorage.getItem("quotation")&&(this.quotation=JSON.parse(localStorage.getItem("quotation")))})}ionViewDidEnter(){return(0,s.mG)(this,void 0,void 0,function*(){localStorage.setItem("step","3"),localStorage.getItem("quotation")&&(this.quotation=JSON.parse(localStorage.getItem("quotation"))),this.loadData()})}loadData(){return(0,s.mG)(this,void 0,void 0,function*(){this.cities_array=[],this.branches=[];const e=yield this.ui.loading("Por favor espere...");this.request.get("indexcities").subscribe(o=>(0,s.mG)(this,void 0,void 0,function*(){(yield e).dismiss(),this.cities_array=o.data,this.city=this.cities_array.find(n=>n.id==this.quotation.city_id),4==this.auth.role.id&&(console.log("customer/index_branch_office/"+this.auth.user.id+"?city_id="+this.quotation.city_id),this.request.get("customer/index_branch_office/"+this.auth.user.id+"?city_id="+this.quotation.city_id).subscribe(n=>{console.log("Res",n),this.branches=n.data.data;const r=this.branches.find(q=>q.id==this.quotation.branch_office_id);this.branch_office=r||this.branches[0]},n=>(0,s.mG)(this,void 0,void 0,function*(){400!=n.status&&(yield this.ui.presentAlert({mode:"ios",header:"No se ha podido cargar la informaci\xf3n ",message:"Por favor, revise su conexi\xf3n",buttons:[{text:"Intentar de nuevo",cssClass:"secondary",handler:r=>{this.loadData()}}]}))})))}),o=>(0,s.mG)(this,void 0,void 0,function*(){(yield e).dismiss(),yield this.ui.presentAlert({mode:"ios",header:"No se ha podido cargar la informaci\xf3n ",message:"Por favor, revise su conexi\xf3n",buttons:[{text:"Intentar de nuevo",cssClass:"secondary",handler:n=>{this.loadData()}}]})}))})}changeCity(){return(0,s.mG)(this,void 0,void 0,function*(){if(this.city=this.cities_array.find(e=>e.id==this.quotation.city_id),4==this.auth.role.id){const e=yield this.ui.loading("Por favor espere...");console.log("customer/index_branch_office/"+this.auth.user.id+"?city_id="+this.quotation.city_id),this.request.get("customer/index_branch_office/"+this.auth.user.id+"?city_id="+this.quotation.city_id).subscribe(o=>(0,s.mG)(this,void 0,void 0,function*(){(yield e).dismiss(),console.log("Res",o),this.branches=o.data.data;const n=this.branches.find(r=>r.id==this.quotation.branch_office_id);n?(this.branch_office=n,this.quotation.branch_office_id=this.branch_office.id):(this.branch_office=this.branches[0],this.quotation.branch_office_id=this.branch_office.id),console.log("Branch Office Id",this.quotation.branch_office_id)}),o=>(0,s.mG)(this,void 0,void 0,function*(){(yield e).dismiss(),400!=o.status&&(yield this.ui.presentAlert({mode:"ios",header:"No se ha podido cargar la informaci\xf3n ",message:"Por favor, revise su conexi\xf3n",buttons:[{text:"Intentar de nuevo",cssClass:"secondary",handler:n=>{this.loadData()}}]}))}))}})}changeBranch(){console.log("Quotation Id",this.quotation.branch_office_id),this.branch_office=this.branches.find(e=>e.id==this.quotation.branch_office_id)}next(){let e="/tabs/select-address",o=this.cities_array.find(n=>n.id==this.quotation.city_id);this.quotation.city=o.name,this.quotation.latitude=o.latitude,this.quotation.longitude=o.longitude,console.log(this.quotation.service_type_id),"3"==this.quotation.service_type_id&&(e="/tabs/add-driver"),localStorage.setItem("quotation",JSON.stringify(this.quotation)),this.router.navigate([e])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.s),t.Y36(m.F),t.Y36(d.F0),t.Y36(_.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-select-city"]],decls:18,vars:5,consts:[[1,"row","justify-content-center",2,"margin-top","10px"],[1,"col-md-11","col-lg-10","col-xl-8","pb-4"],[1,"title"],[2,"background","#eeeeee","color","gray","padding-right","60px","padding-left","60px","border-radius","30px","background-size","20px"],["placeholder","Selecciona una ciudad","interface","alert",1,"col-md-6","col-xs-12",2,"border","2px solid rgba(196, 255, 18, 1)","width","330px","text-align","left","padding","10px","border-radius","20px",3,"interfaceOptions","ngModel","selectedText","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Selecciona una sede","interface","alert","class","col-md-6 col-xs-12","style","border: 2px solid rgba(196, 255, 18, 1) ;\n      width: 330px;\n      text-align: left;\n      padding: 10px;\n      border-radius: 20px;\n    ",3,"interfaceOptions","ngModel","selectedText","ngModelChange",4,"ngIf"],[1,"col-md-11","col-lg-10","col-xl-8"],["mode","ios","routerLink","/tabs/service-type"],["slot","start","name","chevron-back-outline"],["name","arrow-left"],["mode","ios",3,"click"],["slot","end","name","chevron-forward-outline"],[3,"value"],["placeholder","Selecciona una sede","interface","alert",1,"col-md-6","col-xs-12",2,"border","2px solid rgba(196, 255, 18, 1)","width","330px","text-align","left","padding","10px","border-radius","20px",3,"interfaceOptions","ngModel","selectedText","ngModelChange"]],template:function(e,o){1&e&&(t._UZ(0,"app-stepper"),t.TgZ(1,"ion-content")(2,"div",0)(3,"div",1)(4,"div",2)(5,"span",3),t._uU(6,"Seleccione la ciudad"),t.qZA()(),t.TgZ(7,"ion-select",4),t.NdJ("ngModelChange",function(r){return o.quotation.city_id=r})("ngModelChange",function(){return o.changeCity()}),t.YNc(8,b,2,2,"ion-select-option",5),t.qZA(),t.YNc(9,C,2,4,"ion-select",6),t.qZA(),t.TgZ(10,"div",7)(11,"ion-button",8),t._UZ(12,"ion-icon",9)(13,"ion-icon",10),t._uU(14," Atr\xe1s "),t.qZA(),t.TgZ(15,"ion-button",11),t.NdJ("click",function(){return o.next()}),t._UZ(16,"ion-icon",12),t._uU(17," Siguiente "),t.qZA()()()()),2&e&&(t.xp6(7),t.Q6J("interfaceOptions",o.customAlertOptions)("ngModel",o.quotation.city_id)("selectedText",o.city.name),t.xp6(1),t.Q6J("ngForOf",o.cities_array),t.xp6(1),t.Q6J("ngIf",4==o.auth.role.id))},dependencies:[u.sg,u.O5,h.JJ,h.On,y.v,l.YG,l.W2,l.gu,l.t9,l.n0,l.QI,l.YI,d.rH],styles:["ion-select[_ngcontent-%COMP%]{width:100%;justify-content:center}"]}),i})()}];let S=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.Bz.forChild(x),d.Bz]}),i})();var P=a(8412);let M=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.ez,h.u5,P.j,l.Pc,S]}),i})()}}]);