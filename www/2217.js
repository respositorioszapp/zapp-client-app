"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2217,2522,7628,8006],{2522:(x,f,a)=>{a.d(f,{v:()=>d});var p=a(5e3),h=a(9928);let d=(()=>{class u{constructor(){this.step=1,this.percent=0}ngOnInit(){console.log("Stepper ng oninit"),localStorage.getItem("step")&&(this.step=Number(localStorage.getItem("step")),this.percent=Number(this.step/8))}}return u.\u0275fac=function(m){return new(m||u)},u.\u0275cmp=p.Xpm({type:u,selectors:[["app-stepper"]],decls:1,vars:1,consts:[[2,"height","5px","--background","transparent","min-width","100%",3,"value"]],template:function(m,e){1&m&&p._UZ(0,"ion-progress-bar",0),2&m&&p.Q6J("value",e.percent)},dependencies:[h.X7],styles:[".stepper[_ngcontent-%COMP%]{margin:0;padding:30px 0 0;list-style:none;color:#dbdbdb;display:table;table-layout:fixed;width:100%;font-size:.8em}.stepper[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:table-cell;text-align:center;position:relative}.step-icon[_ngcontent-%COMP%]{background-color:#dce1f2!important;border-radius:50%;height:20px;width:20px;text-align:center;flex-shrink:0;position:relative;font-weight:500;color:#49158c;margin:0 auto}.step-icon-active[_ngcontent-%COMP%]{background-color:#49158c!important;color:#fff!important}.step-icon-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.step-horizontal-line[_ngcontent-%COMP%]{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin-bottom:10px;min-width:30px;border-top-color:#0000001f}"]}),u})()},2217:(x,f,a)=>{a.r(f),a.d(f,{SelectAddressPageModule:()=>N});var p=a(9808),h=a(4182),d=a(9928),u=a(3769),g=a(655),m=a(5112),e=a(5e3),C=a(1892),b=a(7556),y=a(1335),S=a(8337),A=a(2522);const M=["scrollMe"],k=function(r){return{favoactive:r}},T=function(r,c){return{selected:r,invalid:c}},v=function(r){return{invalid:r}};function P(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"ion-button",21),e.NdJ("click",function(){const n=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.saveFavoriteAddress(n))}),e._UZ(3,"ion-icon",22),e.qZA(),e.TgZ(4,"div",23)(5,"ion-button",24),e.NdJ("click",function(){const n=e.CHM(t).index,i=e.oxw();return e.KtG(i.rm(n))}),e._uU(6),e.qZA()(),e.TgZ(7,"button",25),e.NdJ("click",function(){const s=e.CHM(t),n=s.$implicit,i=s.index,l=e.oxw();return e.KtG(l.openDialog(n,i))}),e._uU(8),e.qZA(),e.TgZ(9,"textarea",26),e.NdJ("keyup",function(){const n=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.keyUp(n,"description"))})("ngModelChange",function(s){const i=e.CHM(t).$implicit;return e.KtG(i.description=s)}),e._uU(10,"    "),e.qZA(),e.TgZ(11,"ion-note",27),e._uU(12,"Especifique si es Oficina, apto, interior, etc."),e.qZA(),e.TgZ(13,"div",28)(14,"textarea",29),e.NdJ("keyup",function(){const n=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.keyUp(n,"contact_name"))})("ngModelChange",function(s){const i=e.CHM(t).$implicit;return e.KtG(i.contact_name=s)}),e._uU(15,"    "),e.qZA(),e.TgZ(16,"input",30),e.NdJ("keyup",function(){const n=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.keyUp(n,"contact_phone"))})("ngModelChange",function(s){const i=e.CHM(t).$implicit;return e.KtG(i.contact_phone=s)}),e.qZA()()()()}if(2&r){const t=c.$implicit;e.xp6(2),e.Q6J("ngClass",e.VKq(10,k,t.favorite)),e.xp6(4),e.hij(" ",t.index," "),e.xp6(1),e.Q6J("ngClass",e.WLB(12,T,t.selected,t.address_invalid)),e.xp6(1),e.hij(" ",t.address?t.address:"Digita aqu\xed direcci\xf3n de "+((t.index-1)%2==0?"origen":"destino")," "),e.xp6(1),e.Q6J("ngClass",e.VKq(15,v,t.description_invalid))("ngModel",t.description),e.xp6(5),e.Q6J("ngClass",e.VKq(17,v,t.contact_name_invalid))("ngModel",t.contact_name),e.xp6(2),e.Q6J("ngClass",e.VKq(19,v,t.contact_phone_invalid))("ngModel",t.contact_phone)}}function Z(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"ion-row",31)(1,"ion-col",32)(2,"ion-button",33),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.add())}),e._uU(3," agregar direcciones "),e.qZA()()()}}function q(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"ion-fab",34),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.myContent.scrollToTop(300))}),e.TgZ(1,"ion-fab-button",35),e._UZ(2,"ion-icon",36),e.qZA()()}}const w=[{path:"",component:(()=>{class r{constructor(t,o,s,n,i){this.ui=t,this.router=o,this.auth=s,this.request=n,this.error=i,this.quotation={},this.address_arr=[{index:1,address:"",description:"",contact_name:"",contact_phone:"",latitude:"",longitude:"",hover:!1},{index:2,address:"",description:"",contact_name:"",contact_phone:"",latitude:"",longitude:"",hover:!1}],this.az_arr=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],this.bottom_reached=!1}ngOnInit(){localStorage.setItem("step","4"),localStorage.getItem("quotation")&&(this.quotation=JSON.parse(localStorage.getItem("quotation")),this.quotation.address_arr.length>0&&(this.address_arr=this.quotation.address_arr))}ionViewDidEnter(){if(localStorage.setItem("step","4"),this.address_arr=[{index:1,address:"",description:"",contact_name:"",contact_phone:"",latitude:"",longitude:"",office:!1,hover:!1},{index:2,address:"",description:"",contact_name:"",contact_phone:"",latitude:"",longitude:"",office:!1,hover:!1}],console.log("Did enter"),localStorage.getItem("quotation")&&(this.quotation=JSON.parse(localStorage.getItem("quotation")),this.quotation.address_arr.length>0))if(1==this.quotation.service_type_id){this.address_arr=[];const t=this.quotation.address_arr.filter((o,s)=>(console.log("Este es el i",s),0==s||1==s));console.log("Quotaion array",this.quotation.address_arr),console.log("Array",t),t.forEach(o=>{this.address_arr.push(o)})}else this.address_arr=this.quotation.address_arr}keyUp(t,o){t[o+"_invalid"]=!1}change(t){console.log("Item",t)}ngAfterViewInit(){}logScrolling(t){return(0,g.mG)(this,void 0,void 0,function*(){if("ion-content"!=t.target.localName)return;const o=yield t.target.getScrollElement();t.detail.scrollTop>(o.scrollHeight-o.clientHeight)/100*80?(console.log("Scrolled to 80%"),this.bottom_reached=!0):this.bottom_reached=!1})}ionViewWillEnter(){this.hideCart(),localStorage.setItem("step","4"),localStorage.getItem("quotation")&&(this.quotation=JSON.parse(localStorage.getItem("quotation")),this.quotation.address_arr.length>0&&(this.address_arr=this.quotation.address_arr))}scrollToBottom(){return(0,g.mG)(this,void 0,void 0,function*(){try{this.myContent.scrollToBottom(300)}catch(t){}})}saveFavoriteAddress(t){return(0,g.mG)(this,void 0,void 0,function*(){t&&(t.address&&t.latitude&&t.longitude?yield this.ui.presentAlert({mode:"ios",header:"Seleccionar esta direcci\xf3n como favorita ",inputs:[{name:"name_shorcut",id:"name_shorcut",type:"text",placeholder:"Nombre de alias",mode:"ios"},{name:"description",id:"description",type:"textarea",placeholder:"Descripci\xf3n",mode:"ios"}],buttons:[{text:"Registar",cssClass:"secondary",handler:o=>(0,g.mG)(this,void 0,void 0,function*(){const s={customer_id:this.auth.user.id,address:t.address,latitude:t.latitude,longitude:t.longitude,name_shortcut:o.name_shorcut,description:o.description},n=yield this.ui.loading("Por favor espere...");this.request.post("customer/add_favourite_address",s).subscribe(i=>(0,g.mG)(this,void 0,void 0,function*(){(yield n).dismiss(),console.log("Res ",i),t.favorite=!0,this.auth.user.customer_addresses||(this.auth.user.customer_addresses=[]),this.auth.user.customer_addresses.push(s),this.auth.setUser(this.auth.user)}),i=>(0,g.mG)(this,void 0,void 0,function*(){console.log("Err ",i),(yield n).dismiss(),this.error.response(i)}))})}]}):t.address||(yield this.ui.presentAlert({mode:"ios",header:"Seleccione una direcci\xf3n",buttons:[{text:"Aceptar",role:"cancel",cssClass:"secondary",handler:o=>{}}]})))})}next(){this.address_arr.find(l=>""==l.address);let i=!0;for(let l=0;l<this.address_arr.length;l++)Object.keys(this.address_arr[l]).map(_=>{!_.includes("invalid")&&"hover"!=_&&"office"!=_&&"favorite"!=_&&(null==this.address_arr[l][_]||""==this.address_arr[l][_])&&(this.address_arr[l][_+"_invalid"]=!0,i=!1)});console.log("Address_array",this.address_arr),i?(this.quotation.address_arr=this.address_arr,localStorage.setItem("quotation",JSON.stringify(this.quotation)),this.router.navigate(["/tabs/trip"])):this.ui.showToast("Debe llenar todos los campos")}hideCart(){this.auth.person.hide_cart=!0,this.auth.setPerson(this.auth.person)}add(){this.address_arr.push({index:this.address_arr[this.address_arr.length-1].index+1,address:"",description:"",contact_name:"",contact_phone:"",latitude:"",longitude:"",office:!1,hover:!1}),this.address_arr.forEach((s,n)=>{s.index=n+1}),this.scrollToBottom()}rm(t){this.address_arr.length>2&&(this.address_arr.splice(t,1),this.address_arr.forEach((o,s)=>{o.index=s+1}))}openDialog(t,o){return(0,g.mG)(this,void 0,void 0,function*(){let n={city:this.quotation.city,latitude:this.address_arr[o].latitude?this.address_arr[o].latitude:this.quotation.latitude,longitude:this.address_arr[o].longitude?this.address_arr[o].longitude:this.quotation.longitude,icon:this.az_arr[o]+".png",address:this.address_arr[o].address};(yield this.ui.presentModal(m.s,n,["custom-modal"])).onDidDismiss().then(()=>{if(localStorage.getItem("address_item")){let l=JSON.parse(localStorage.getItem("address_item"));this.address_arr[o].address=l.address,this.address_arr[o].latitude=l.lat,this.address_arr[o].longitude=l.lng,t.selected=!0,t.favorite=l.favorite,t.address_invalid=!1,localStorage.removeItem("address_item")}})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.F),e.Y36(u.F0),e.Y36(b.e),e.Y36(y.s),e.Y36(S.Y))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-select-address"]],viewQuery:function(t,o){if(1&t&&(e.Gf(d.W2,5,d.W2),e.Gf(M,5)),2&t){let s;e.iGM(s=e.CRH())&&(o.myContent=s.first),e.iGM(s=e.CRH())&&(o.myScrollContainer=s.first)}},decls:30,vars:6,consts:[[2,"margin-bottom","10px"],[1,"row","justify-content-center",2,"margin-right","0","margin-left","0","width","100%"],[1,"col-md-11","col-lg-10","col-xl-8"],[2,"background","#eeeeee","color","gray","padding-right","130px","padding-left","130px","border-radius","30px","font-size","21px","display","block"],[3,"scrollEvents","ionScroll"],[1,"row","justify-content-center","heigth-1"],["class","addresstask ",4,"ngFor","ngForOf"],["size","6"],["lines","none",2,"--background","#49158c00"],["color","primary","mode","ios",3,"ngModel","ngModelChange"],[1,"toogle-label"],["style","--background: #49158c00;",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed",3,"click",4,"ngIf"],[1,"col-md-11","col-lg-10","col-xl-8","m-auto",2,"margin","auto"],["mode","ios","routerLink","/tabs/select-city"],["slot","start","name","chevron-back-outline"],["name","arrow-left"],["mode","ios",3,"click"],["slot","end","name","chevron-forward-outline"],[1,"addresstask"],[2,"display","flex","flex-direction","column","width","100%"],["fill","clear","size","small",1,"favorite",3,"ngClass","click"],["name","star","color","warning","slot","icon-only"],[1,"addresstask-icon","text-center"],["shape","round","size","small",1,"mat-elevation-z0",2,"width","100%","height","100%",3,"click"],["mat-stroked-button","",1,"addresstask-address-btn",2,"word-wrap","break-word !important","font-family","Gilroy-Light","border-top","0.5px solid rgb(218 218 218)","border-right","0.5px solid rgb(218 218 218)","border-left","0.5px solid rgb(218 218 218)",3,"ngClass","click"],["autocomplete","off","placeholder","\xbfQu\xe9 hacer al llegar a esta direcci\xf3n? \n      ","cols","30","rows","2","maxlength","500",1,"addresstask-task",2,"border-top-left-radius","0","border-top-right-radius","0","border","0.5px solid rgb(218 218 218)",3,"ngClass","ngModel","keyup","ngModelChange"],["color","primary",1,"ion-text-center",2,"margin-bottom","10px","margin-bottom","10px"],[2,"display","flex"],["placeholder","Nombre del contacto","cols","30","rows","2","maxlength","500","autocomplete","off",1,"addresstask-task",2,"width","50%","margin-right","2%","border","0.5px solid rgb(218 218 218)",3,"ngClass","ngModel","keyup","ngModelChange"],["type","number","autocomplete","off","placeholder","Tel\xe9fono del contacto","onkeydown","javascript: return event.keyCode === 8 ||\n            event.keyCode === 46 ? true : !isNaN(Number(event.key))",1,"addresstask-task",2,"width","50%","border","0.5px solid rgb(218 218 218)","padding","0 5px",3,"ngClass","ngModel","keyup","ngModelChange"],[2,"--background","#49158c00"],["size","6",2,"--background","#49158c21"],["size","default","fill","outline",3,"click"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],[2,"width","40px","height","40px"],["name","chevron-up-outline"]],template:function(t,o){1&t&&(e._UZ(0,"app-stepper",0),e.TgZ(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4,"Direcciones"),e.qZA()()(),e.TgZ(5,"ion-content",4),e.NdJ("ionScroll",function(n){return o.logScrolling(n)}),e.TgZ(6,"div",5),e.YNc(7,P,17,21,"div",6),e.TgZ(8,"ion-grid")(9,"ion-row")(10,"ion-col",7)(11,"ion-item",8)(12,"ion-toggle",9),e.NdJ("ngModelChange",function(n){return o.quotation.round_trip=n}),e.qZA(),e.TgZ(13,"ion-label",10),e._uU(14,"IDA Y VUELTA"),e.qZA()()(),e.TgZ(15,"ion-col",7)(16,"ion-item",8)(17,"ion-toggle",9),e.NdJ("ngModelChange",function(n){return o.quotation.diligence=n}),e.qZA(),e.TgZ(18,"ion-label",10),e._uU(19,"DILIGENCIA"),e.qZA()()()(),e.YNc(20,Z,4,0,"ion-row",11),e.qZA()(),e.YNc(21,q,3,0,"ion-fab",12),e.qZA(),e.TgZ(22,"div",13)(23,"ion-button",14),e._UZ(24,"ion-icon",15)(25,"ion-icon",16),e._uU(26," Atr\xe1s "),e.qZA(),e.TgZ(27,"ion-button",17),e.NdJ("click",function(){return o.next()}),e._UZ(28,"ion-icon",18),e._uU(29," Siguiente "),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("scrollEvents",!0),e.xp6(2),e.Q6J("ngForOf",o.address_arr),e.xp6(5),e.Q6J("ngModel",o.quotation.round_trip),e.xp6(5),e.Q6J("ngModel",o.quotation.diligence),e.xp6(3),e.Q6J("ngIf","2"==o.quotation.service_type_id),e.xp6(1),e.Q6J("ngIf",o.bottom_reached&&o.address_arr.length>2))},dependencies:[p.mk,p.sg,p.O5,h.Fj,h.wV,h.JJ,h.nD,h.On,d.YG,d.wI,d.W2,d.IJ,d.W4,d.jY,d.gu,d.Ie,d.Q$,d.uN,d.Nd,d.ho,d.w,d.YI,A.v,u.rH],styles:[".selected[_ngcontent-%COMP%]{color:#000!important;font-weight:700}.heigth-1[_ngcontent-%COMP%], .heigth-2[_ngcontent-%COMP%]{height:90%;margin:0;padding:0;max-height:100%;width:100%}"]}),r})()}];let J=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[u.Bz.forChild(w),u.Bz]}),r})();var I=a(8412);let N=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[p.ez,h.u5,d.Pc,I.j,J]}),r})()}}]);