"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4034,8337,3039,4094,8647,8179],{8337:(C,M,o)=>{o.d(M,{Y:()=>y});var f=o(655),m=o(5e3),P=o(1892);let y=(()=>{class u{constructor(t){this.ui=t}response(t,e){return(0,f.mG)(this,void 0,void 0,function*(){if(t.error){if(t.error.messages)return void(yield this.ui.presentAlert({mode:"ios",header:t.error.messages[0],buttons:[{text:"Aceptar",role:"cancel",cssClass:"secondary",handler:r=>{e&&e.method&&"function"==typeof e.method&&e.method()}}]}));if(t.error.message)return void(yield this.ui.presentAlert({mode:"ios",header:t.error.message,buttons:[{text:"Aceptar",role:"cancel",cssClass:"secondary",handler:r=>{e&&e.method&&"function"==typeof e.method&&e.method()}}]}))}0==t.status?(e?e.message||(e.message="No se ha podido mostrar la informaci\xf3n"):e={message:"No se ha podido mostrar la informaci\xf3n"},yield this.ui.presentAlert({mode:"ios",header:e.message,message:"Esto se presenta cuando su conexi\xf3n es lenta o inexistente",buttons:[{text:"Aceptar",cssClass:"secondary",handler:r=>{e&&e.methodReload&&"function"==typeof e.methodReload&&e.methodReload(),e&&e.method&&"function"==typeof e.method&&e.method()}}]})):500==t.status&&(yield this.ui.presentAlert({mode:"ios",header:"Ha ocurrido un eror en el servidor",message:"",buttons:[{text:"Aceptar",cssClass:"secondary",handler:r=>{}}]})),t.message&&"Timeout has occurred"==t.message&&(yield this.ui.presentAlert({mode:"ios",header:"Esta operaci\xf3n ha demorado demasiado tiempo",message:"Por favor, revise su conexi\xf3n ",buttons:[{text:"Aceptar",role:"cancel",cssClass:"secondary",handler:r=>{e&&e.method&&"function"==typeof e.method&&e.method(),e&&e.methodReload&&"function"==typeof e.methodReload&&e.methodReload()}}]}))})}}return u.\u0275fac=function(t){return new(t||u)(m.LFG(P.F))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},7326:(C,M,o)=>{o.d(M,{N:()=>A});var f=o(655),m=o(5e3),P=o(1335),y=o(1892),u=o(7556);let A=(()=>{class t{constructor(r,c,l){this.request=r,this.ui=c,this.auth=l,this.taxes={}}calculate_price(r,c,l,N,g){return(0,f.mG)(this,void 0,void 0,function*(){return this.getTotal(r,c,l,N,g)})}getTotalStore(r,c,l,N,g){return(0,f.mG)(this,void 0,void 0,function*(){let a=0;return new Promise((s,b)=>{this.request.get("get_pricing_for_order").subscribe(_=>(0,f.mG)(this,void 0,void 0,function*(){console.log("Res",_);const i=_.data.find(E=>E.transport_type_id==g);let h=Number(i.rate_base),n=Number(i.minimal_distance?i.minimal_distance:i.km_base),d=Number(i.value_per_distance?i.value_per_distance:i.km_unit_value),p=Number(i.peripheries?i.peripheries:i.neighboring_base);console.log("Taxes",this.auth.user.taxes);var v=0;if("Motorizado"==c||"Carry"==c)r>n?(v=Math.abs(r-n),a=h+v*d,console.log("Price Carry",a)):a=h,1==l&&(a+=p);else if("Autom\xf3vil"==c){if(r>n){const E=d*(v=Math.abs(r-n))+v*(.25*d);console.log("Distance chage price",E),a=h+E,a=Math.round(a)}else a=h;1==l&&(a+=p)}console.log("Price Distance",r),console.log("price es :"+a+" rate "+d),s(a)}),_=>(0,f.mG)(this,void 0,void 0,function*(){s(a)}))})})}getTotal(r,c,l,N,g){var a=0;let s=this.auth.user.configuration_data.find(d=>d.transport_type_id==g);s||localStorage.getItem("configuration_data")&&(s=JSON.parse(localStorage.getItem("configuration_data")));let b=Number(s.rate_base),_=Number(s.minimal_distance?s.minimal_distance:s.km_base),i=Number(s.value_per_distance?s.value_per_distance:s.km_unit_value),h=Number(s.peripheries?s.peripheries:s.neighboring_base);console.log("Taxes",this.auth.user.taxes);var n=0;if("Motorizado"==c||"Carry"==c)r>_?(a=b+(n=Math.abs(r-_))*i,console.log("Price Carry",a)):a=b,1==l&&(a+=h);else if("Autom\xf3vil"==c){if(r>_){const d=i*(n=Math.abs(r-_))+n*(.25*i);console.log("Distance chage price",d),a=b+d,a=Math.round(a)}else a=b;1==l&&(a+=h)}return console.log("price es :"+a+" rate "+i),a}}return t.\u0275fac=function(r){return new(r||t)(m.LFG(P.s),m.LFG(y.F),m.LFG(u.e))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);