"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4152],{6640:(ct,I,m)=>{m.d(I,{B:()=>z});var u=m(5e3),Y=m(1892),w=m(9808),M=m(9928);function x(C,y){if(1&C){const _=u.EpF();u.TgZ(0,"ion-item",4),u.NdJ("click",function(){u.CHM(_);const S=u.oxw().$implicit,O=u.oxw();return u.KtG(O.callANumber(S.driver_phone))}),u.TgZ(1,"ion-text",1),u._uU(2),u.qZA(),u.TgZ(3,"ion-button",5),u._UZ(4,"ion-icon",6),u.qZA()()}if(2&C){const _=u.oxw().$implicit;u.xp6(2),u.hij(" ",_.driver_phone," ")}}function G(C,y){if(1&C){const _=u.EpF();u.ynx(0),u.TgZ(1,"ion-item")(2,"ion-avatar",1)(3,"img",2),u.NdJ("click",function(){u.CHM(_);const S=u.oxw();return u.KtG(S.viewImage(S.photo))}),u.qZA()(),u.TgZ(4,"ion-text"),u._uU(5),u.qZA()(),u.YNc(6,x,5,1,"ion-item",3),u.BQk()}if(2&C){const _=y.$implicit,b=u.oxw();u.xp6(3),u.Q6J("src",b.photo?b.photo:"assets/imgs/avatar.svg",u.LSH),u.xp6(2),u.hij(" ",_.driver_name," "),u.xp6(1),u.Q6J("ngIf",25!=b.order.status_order)}}let z=(()=>{class C{constructor(_){this.ui=_,this.photo="assets/imgs/avatar.svg"}ngOnInit(){this.driver.length>0&&(this.photo=this.driver[0].photo_driver)}callANumber(_){console.log("Phone",_),this.ui.call(_)}viewImage(_){this.ui.viewImage(_)}}return C.\u0275fac=function(_){return new(_||C)(u.Y36(Y.F))},C.\u0275cmp=u.Xpm({type:C,selectors:[["app-driver-popover"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["slot","start"],[3,"src","click"],["lines","none",3,"click",4,"ngIf"],["lines","none",3,"click"],["expand","block","mode","ios","color","success","slot","end",2,"--border-radius","50%"],["name","call-outline"]],template:function(_,b){1&_&&u.YNc(0,G,7,3,"ng-container",0),2&_&&u.Q6J("ngForOf",b.driver)},dependencies:[w.sg,w.O5,M.BJ,M.YG,M.gu,M.Ie,M.yW]}),C})()},4152:(ct,I,m)=>{m.r(I),m.d(I,{HistoryPageModule:()=>Ve});var u=m(9808),Y=m(4182),w=m(9928),M=m(3769),x=m(655),G=m(5338),z=m(6640),C=m(4462),y=m(833);function _(n){return(0,y.Z)(1,arguments),n instanceof Date||"object"==typeof n&&"[object Date]"===Object.prototype.toString.call(n)}var b=m(953);function S(n){if((0,y.Z)(1,arguments),!_(n)&&"number"!=typeof n)return!1;var r=(0,b.Z)(n);return!isNaN(Number(r))}var O=m(1998);function lt(n,r){(0,y.Z)(2,arguments);var t=(0,b.Z)(n).getTime(),a=(0,O.Z)(r);return new Date(t+a)}function ut(n,r){(0,y.Z)(2,arguments);var t=(0,O.Z)(r);return lt(n,-t)}function Q(n){(0,y.Z)(1,arguments);var r=1,t=(0,b.Z)(n),a=t.getUTCDay(),o=(a<r?7:0)+a-r;return t.setUTCDate(t.getUTCDate()-o),t.setUTCHours(0,0,0,0),t}function et(n){(0,y.Z)(1,arguments);var r=(0,b.Z)(n),t=r.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(t+1,0,4),a.setUTCHours(0,0,0,0);var o=Q(a),i=new Date(0);i.setUTCFullYear(t,0,4),i.setUTCHours(0,0,0,0);var s=Q(i);return r.getTime()>=o.getTime()?t+1:r.getTime()>=s.getTime()?t:t-1}function mt(n){(0,y.Z)(1,arguments);var r=et(n),t=new Date(0);t.setUTCFullYear(r,0,4),t.setUTCHours(0,0,0,0);var a=Q(t);return a}var ht=6048e5,nt={};function j(){return nt}function J(n,r){var t,a,o,i,s,d,c,l;(0,y.Z)(1,arguments);var g=j(),h=(0,O.Z)(null!==(t=null!==(a=null!==(o=null!==(i=null==r?void 0:r.weekStartsOn)&&void 0!==i?i:null==r||null===(s=r.locale)||void 0===s||null===(d=s.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==o?o:g.weekStartsOn)&&void 0!==a?a:null===(c=g.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==t?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=(0,b.Z)(n),p=v.getUTCDay(),T=(p<h?7:0)+p-h;return v.setUTCDate(v.getUTCDate()-T),v.setUTCHours(0,0,0,0),v}function rt(n,r){var t,a,o,i,s,d,c,l;(0,y.Z)(1,arguments);var g=(0,b.Z)(n),h=g.getUTCFullYear(),v=j(),p=(0,O.Z)(null!==(t=null!==(a=null!==(o=null!==(i=null==r?void 0:r.firstWeekContainsDate)&&void 0!==i?i:null==r||null===(s=r.locale)||void 0===s||null===(d=s.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==o?o:v.firstWeekContainsDate)&&void 0!==a?a:null===(c=v.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==t?t:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=new Date(0);T.setUTCFullYear(h+1,0,p),T.setUTCHours(0,0,0,0);var W=J(T,r),k=new Date(0);k.setUTCFullYear(h,0,p),k.setUTCHours(0,0,0,0);var F=J(k,r);return g.getTime()>=W.getTime()?h+1:g.getTime()>=F.getTime()?h:h-1}function vt(n,r){var t,a,o,i,s,d,c,l;(0,y.Z)(1,arguments);var g=j(),h=(0,O.Z)(null!==(t=null!==(a=null!==(o=null!==(i=null==r?void 0:r.firstWeekContainsDate)&&void 0!==i?i:null==r||null===(s=r.locale)||void 0===s||null===(d=s.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==o?o:g.firstWeekContainsDate)&&void 0!==a?a:null===(c=g.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==t?t:1),v=rt(n,r),p=new Date(0);p.setUTCFullYear(v,0,h),p.setUTCHours(0,0,0,0);var T=J(p,r);return T}var pt=6048e5;function f(n,r){for(var t=n<0?"-":"",a=Math.abs(n).toString();a.length<r;)a="0"+a;return t+a}const Z_y=function(n,r){var t=n.getUTCFullYear(),a=t>0?t:1-t;return f("yy"===r?a%100:a,r.length)},Z_M=function(n,r){var t=n.getUTCMonth();return"M"===r?String(t+1):f(t+1,2)},Z_d=function(n,r){return f(n.getUTCDate(),r.length)},Z_h=function(n,r){return f(n.getUTCHours()%12||12,r.length)},Z_H=function(n,r){return f(n.getUTCHours(),r.length)},Z_m=function(n,r){return f(n.getUTCMinutes(),r.length)},Z_s=function(n,r){return f(n.getUTCSeconds(),r.length)},Z_S=function(n,r){var t=r.length,a=n.getUTCMilliseconds();return f(Math.floor(a*Math.pow(10,t-3)),r.length)};function at(n,r){var t=n>0?"-":"+",a=Math.abs(n),o=Math.floor(a/60),i=a%60;if(0===i)return t+String(o);var s=r||"";return t+String(o)+s+f(i,2)}function ot(n,r){return n%60==0?(n>0?"-":"+")+f(Math.abs(n)/60,2):U(n,r)}function U(n,r){var t=r||"",a=n>0?"-":"+",o=Math.abs(n);return a+f(Math.floor(o/60),2)+t+f(o%60,2)}const xt={G:function(n,r,t){var a=n.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return t.era(a,{width:"abbreviated"});case"GGGGG":return t.era(a,{width:"narrow"});default:return t.era(a,{width:"wide"})}},y:function(n,r,t){if("yo"===r){var a=n.getUTCFullYear();return t.ordinalNumber(a>0?a:1-a,{unit:"year"})}return Z_y(n,r)},Y:function(n,r,t,a){var o=rt(n,a),i=o>0?o:1-o;return"YY"===r?f(i%100,2):"Yo"===r?t.ordinalNumber(i,{unit:"year"}):f(i,r.length)},R:function(n,r){return f(et(n),r.length)},u:function(n,r){return f(n.getUTCFullYear(),r.length)},Q:function(n,r,t){var a=Math.ceil((n.getUTCMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return f(a,2);case"Qo":return t.ordinalNumber(a,{unit:"quarter"});case"QQQ":return t.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(a,{width:"narrow",context:"formatting"});default:return t.quarter(a,{width:"wide",context:"formatting"})}},q:function(n,r,t){var a=Math.ceil((n.getUTCMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return f(a,2);case"qo":return t.ordinalNumber(a,{unit:"quarter"});case"qqq":return t.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(a,{width:"narrow",context:"standalone"});default:return t.quarter(a,{width:"wide",context:"standalone"})}},M:function(n,r,t){var a=n.getUTCMonth();switch(r){case"M":case"MM":return Z_M(n,r);case"Mo":return t.ordinalNumber(a+1,{unit:"month"});case"MMM":return t.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(a,{width:"narrow",context:"formatting"});default:return t.month(a,{width:"wide",context:"formatting"})}},L:function(n,r,t){var a=n.getUTCMonth();switch(r){case"L":return String(a+1);case"LL":return f(a+1,2);case"Lo":return t.ordinalNumber(a+1,{unit:"month"});case"LLL":return t.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(a,{width:"narrow",context:"standalone"});default:return t.month(a,{width:"wide",context:"standalone"})}},w:function(n,r,t,a){var o=function yt(n,r){(0,y.Z)(1,arguments);var t=(0,b.Z)(n),a=J(t,r).getTime()-vt(t,r).getTime();return Math.round(a/pt)+1}(n,a);return"wo"===r?t.ordinalNumber(o,{unit:"week"}):f(o,r.length)},I:function(n,r,t){var a=function _t(n){(0,y.Z)(1,arguments);var r=(0,b.Z)(n),t=Q(r).getTime()-mt(r).getTime();return Math.round(t/ht)+1}(n);return"Io"===r?t.ordinalNumber(a,{unit:"week"}):f(a,r.length)},d:function(n,r,t){return"do"===r?t.ordinalNumber(n.getUTCDate(),{unit:"date"}):Z_d(n,r)},D:function(n,r,t){var a=function ft(n){(0,y.Z)(1,arguments);var r=(0,b.Z)(n),t=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var a=r.getTime();return Math.floor((t-a)/864e5)+1}(n);return"Do"===r?t.ordinalNumber(a,{unit:"dayOfYear"}):f(a,r.length)},E:function(n,r,t){var a=n.getUTCDay();switch(r){case"E":case"EE":case"EEE":return t.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(a,{width:"short",context:"formatting"});default:return t.day(a,{width:"wide",context:"formatting"})}},e:function(n,r,t,a){var o=n.getUTCDay(),i=(o-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(i);case"ee":return f(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(o,{width:"short",context:"formatting"});default:return t.day(o,{width:"wide",context:"formatting"})}},c:function(n,r,t,a){var o=n.getUTCDay(),i=(o-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(i);case"cc":return f(i,r.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(o,{width:"narrow",context:"standalone"});case"cccccc":return t.day(o,{width:"short",context:"standalone"});default:return t.day(o,{width:"wide",context:"standalone"})}},i:function(n,r,t){var a=n.getUTCDay(),o=0===a?7:a;switch(r){case"i":return String(o);case"ii":return f(o,r.length);case"io":return t.ordinalNumber(o,{unit:"day"});case"iii":return t.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(a,{width:"short",context:"formatting"});default:return t.day(a,{width:"wide",context:"formatting"})}},a:function(n,r,t){var o=n.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(o,{width:"narrow",context:"formatting"});default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(n,r,t){var o,a=n.getUTCHours();switch(o=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",r){case"b":case"bb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(o,{width:"narrow",context:"formatting"});default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(n,r,t){var o,a=n.getUTCHours();switch(o=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",r){case"B":case"BB":case"BBB":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(o,{width:"narrow",context:"formatting"});default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(n,r,t){if("ho"===r){var a=n.getUTCHours()%12;return 0===a&&(a=12),t.ordinalNumber(a,{unit:"hour"})}return Z_h(n,r)},H:function(n,r,t){return"Ho"===r?t.ordinalNumber(n.getUTCHours(),{unit:"hour"}):Z_H(n,r)},K:function(n,r,t){var a=n.getUTCHours()%12;return"Ko"===r?t.ordinalNumber(a,{unit:"hour"}):f(a,r.length)},k:function(n,r,t){var a=n.getUTCHours();return 0===a&&(a=24),"ko"===r?t.ordinalNumber(a,{unit:"hour"}):f(a,r.length)},m:function(n,r,t){return"mo"===r?t.ordinalNumber(n.getUTCMinutes(),{unit:"minute"}):Z_m(n,r)},s:function(n,r,t){return"so"===r?t.ordinalNumber(n.getUTCSeconds(),{unit:"second"}):Z_s(n,r)},S:function(n,r){return Z_S(n,r)},X:function(n,r,t,a){var i=(a._originalDate||n).getTimezoneOffset();if(0===i)return"Z";switch(r){case"X":return ot(i);case"XXXX":case"XX":return U(i);default:return U(i,":")}},x:function(n,r,t,a){var i=(a._originalDate||n).getTimezoneOffset();switch(r){case"x":return ot(i);case"xxxx":case"xx":return U(i);default:return U(i,":")}},O:function(n,r,t,a){var i=(a._originalDate||n).getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+at(i,":");default:return"GMT"+U(i,":")}},z:function(n,r,t,a){var i=(a._originalDate||n).getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+at(i,":");default:return"GMT"+U(i,":")}},t:function(n,r,t,a){return f(Math.floor((a._originalDate||n).getTime()/1e3),r.length)},T:function(n,r,t,a){return f((a._originalDate||n).getTime(),r.length)}};var it=function(n,r){switch(n){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});default:return r.date({width:"full"})}},st=function(n,r){switch(n){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});default:return r.time({width:"full"})}};const Pt={p:st,P:function(n,r){var i,t=n.match(/(P+)(p+)?/)||[],a=t[1],o=t[2];if(!o)return it(n,r);switch(a){case"P":i=r.dateTime({width:"short"});break;case"PP":i=r.dateTime({width:"medium"});break;case"PPP":i=r.dateTime({width:"long"});break;default:i=r.dateTime({width:"full"})}return i.replace("{{date}}",it(a,r)).replace("{{time}}",st(o,r))}};function Mt(n){var r=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return r.setUTCFullYear(n.getFullYear()),n.getTime()-r.getTime()}var Ot=["D","DD"],Zt=["YY","YYYY"];function Dt(n){return-1!==Ot.indexOf(n)}function Ut(n){return-1!==Zt.indexOf(n)}function dt(n,r,t){if("YYYY"===n)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===n)throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===n)throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===n)throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var kt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function L(n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.width?String(r.width):n.defaultWidth,a=n.formats[t]||n.formats[n.defaultWidth];return a}}var Wt={date:L({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:L({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:L({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},qt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function E(n){return function(r,t){var o;if("formatting"===(null!=t&&t.context?String(t.context):"standalone")&&n.formattingValues){var i=n.defaultFormattingWidth||n.defaultWidth,s=null!=t&&t.width?String(t.width):i;o=n.formattingValues[s]||n.formattingValues[i]}else{var d=n.defaultWidth,c=null!=t&&t.width?String(t.width):n.defaultWidth;o=n.values[c]||n.values[d]}return o[n.argumentCallback?n.argumentCallback(r):r]}}function A(n){return function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.width,o=a&&n.matchPatterns[a]||n.matchPatterns[n.defaultMatchWidth],i=r.match(o);if(!i)return null;var l,s=i[0],d=a&&n.parsePatterns[a]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(d)?Kt(d,function(h){return h.test(s)}):Xt(d,function(h){return h.test(s)});l=n.valueCallback?n.valueCallback(c):c,l=t.valueCallback?t.valueCallback(l):l;var g=r.slice(s.length);return{value:l,rest:g}}}function Xt(n,r){for(var t in n)if(n.hasOwnProperty(t)&&r(n[t]))return t}function Kt(n,r){for(var t=0;t<n.length;t++)if(r(n[t]))return t}const me={code:"en-US",formatDistance:function(n,r,t){var a,o=kt[n];return a="string"==typeof o?o:1===r?o.one:o.other.replace("{{count}}",r.toString()),null!=t&&t.addSuffix?t.comparison&&t.comparison>0?"in "+a:a+" ago":a},formatLong:Wt,formatRelative:function(n,r,t,a){return qt[n]},localize:{ordinalNumber:function(n,r){var t=Number(n),a=t%100;if(a>20||a<10)switch(a%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:E({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:E({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(n){return n-1}}),month:E({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:E({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:E({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function Vt(n){return function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.match(n.matchPattern);if(!a)return null;var o=a[0],i=r.match(n.parsePattern);if(!i)return null;var s=n.valueCallback?n.valueCallback(i[0]):i[0];s=t.valueCallback?t.valueCallback(s):s;var d=r.slice(o.length);return{value:s,rest:d}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(n){return parseInt(n,10)}}),era:A({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:A({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(n){return n+1}}),month:A({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:A({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:A({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var he=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ve=/^'([^]*?)'?$/,pe=/''/g,ye=/[a-zA-Z]/;function we(n){var r=n.match(ve);return r?r[1].replace(pe,"'"):n}var xe=m(8785),Te=m(3540),e=m(5e3),Ce=m(1335),Pe=m(1892),Me=m(7556),Oe=m(9099),Ze=m(8337);function De(n,r){1&n&&e._UZ(0,"ion-icon",44)}const Ue=function(n){return{"text-yellow":n}};function ke(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",45),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,i=e.oxw(2);return e.KtG(i.showQualification(o))}),e._uU(1),e._UZ(2,"ion-icon",46),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.score_service?t.score_service:0,""),e.xp6(1),e.Q6J("ngClass",e.VKq(2,Ue,t.score_service))}}const Se=function(n){return{"ion-float-right":n}};function Ne(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,i=e.oxw(2);return e.KtG(i.cancel(o))}),e._UZ(1,"ion-icon",48),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(1,Se,1==t.zapp_store_order))}}function Ye(n,r){if(1&n&&(e.TgZ(0,"div",28)(1,"div",26)(2,"strong",49),e._uU(3),e.qZA()()()),2&n){const t=r.$implicit;e.xp6(3),e.Oqu(t.address)}}function Ee(n,r){if(1&n&&(e.TgZ(0,"div",28)(1,"div",26)(2,"p",50),e._uU(3," N\xfamero de horas : "),e.qZA()(),e.TgZ(4,"div",51)(5,"strong"),e._uU(6),e.qZA()()()),2&n){const t=e.oxw().$implicit;e.xp6(6),e.Oqu(t.number_hours)}}function Ae(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",28)(2,"p",29),e._uU(3,"Tiempo de espera : "),e.TgZ(4,"strong"),e._uU(5),e.qZA()()(),e.TgZ(6,"div",28)(7,"p",29),e._uU(8,"Monto tiempo de espera : "),e.TgZ(9,"strong"),e._uU(10),e.ALo(11,"currency"),e.qZA()()(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(5),e.hij("",t.total_time," minutos "),e.xp6(5),e.Oqu(e.gM2(11,2,t.total-(t.order_total?t.order_total:0),"","symbol","1.0"))}}function We(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",28)(2,"div")(3,"p",29),e._uU(4," Ciudad : "),e.TgZ(5,"strong"),e._uU(6),e.qZA()()()(),e.TgZ(7,"div",28)(8,"div")(9,"p",29),e._uU(10," Recorrido :"),e.TgZ(11,"strong"),e._uU(12),e.qZA()()()(),e.TgZ(13,"div",28)(14,"div",50)(15,"p",29),e._uU(16," Valor declarado : "),e.TgZ(17,"strong"),e._uU(18),e.qZA()()()(),e.TgZ(19,"div",28)(20,"div")(21,"p",29),e._uU(22," Tipo de accesorio : "),e.TgZ(23,"strong"),e._uU(24),e.qZA()()()(),e.TgZ(25,"div",28)(26,"div")(27,"p",52),e._uU(28," M\xe9todo de pago : "),e.TgZ(29,"strong"),e._uU(30),e.qZA()()()(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(6),e.Oqu(t.city),e.xp6(6),e.Oqu(1==t.round_trip?"Ida y Vuelta":"Ida"),e.xp6(6),e.Oqu(t.declared_value),e.xp6(6),e.Oqu(t.accessory_type),e.xp6(6),e.Oqu(t.payment_method)}}function Fe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"ion-col",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,i=e.oxw(2);return e.KtG(i.view_driver(o))}),e.TgZ(1,"ion-button",53),e._UZ(2,"ion-icon",54),e.qZA()()}}function qe(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"p",55)(2,"strong"),e._uU(3),e.qZA()(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Tol(t.color),e.xp6(1),e.Oqu(t.state_order)}}function He(n,r){if(1&n&&(e.TgZ(0,"ion-button",57),e._UZ(1,"img",58),e.qZA()),2&n){const t=e.oxw(2).$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("src",a.getStoreState(t).image,e.LSH)}}function Ie(n,r){1&n&&(e.TgZ(0,"p"),e._uU(1,"Finalizada"),e.qZA())}function Qe(n,r){if(1&n&&(e.YNc(0,He,2,1,"ion-button",56),e.YNc(1,Ie,2,0,"p",32)),2&n){const t=e.oxw().$implicit,a=e.oxw(2);e.Q6J("ngIf",a.getStoreState(t)),e.xp6(1),e.Q6J("ngIf",!a.getStoreState(t))}}const je=function(n){return{hidden:n}};function Je(n,r){if(1&n&&(e.TgZ(0,"h6",59),e._uU(1,"Estamos buscando al mensajero m\xe1s cercano"),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(1,je,!t.view_more))}}function Re(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"ion-card",19)(1,"div",20),e.YNc(2,De,1,0,"ion-icon",21),e.YNc(3,ke,3,4,"ion-button",22),e.qZA(),e.TgZ(4,"ion-card-content",23),e.YNc(5,Ne,2,3,"ion-button",24),e.TgZ(6,"div",25)(7,"div",26),e._uU(8),e.qZA(),e.TgZ(9,"div",27),e._uU(10),e.qZA()(),e.TgZ(11,"div",28)(12,"div")(13,"p",29),e._uU(14,"Tipo de Servicio : "),e.TgZ(15,"strong"),e._uU(16),e.qZA()()()(),e.YNc(17,Ye,4,1,"div",30),e.YNc(18,Ee,7,1,"div",31),e.TgZ(19,"div",28)(20,"div")(21,"p",29),e._uU(22,"Total : "),e.TgZ(23,"strong"),e._uU(24),e.ALo(25,"currency"),e.qZA()()()(),e.YNc(26,Ae,12,7,"ng-container",32),e.YNc(27,We,31,5,"ng-container",32),e.TgZ(28,"ion-row",33)(29,"ion-col",34),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.view_order(i))}),e.TgZ(30,"ion-button",35),e._uU(31," Ver "),e._UZ(32,"ion-icon",36),e.qZA()(),e.YNc(33,Fe,3,0,"ion-col",37),e.TgZ(34,"ion-col",38),e.YNc(35,qe,4,3,"ng-container",13),e.YNc(36,Qe,2,2,"ng-template",null,39,e.W1O),e.qZA(),e.YNc(38,Je,2,3,"h6",40),e.qZA()(),e.TgZ(39,"div",41),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.viewMore(i))}),e.TgZ(40,"ion-button",42),e._UZ(41,"ion-icon",43),e.qZA()()()}if(2&n){const t=r.$implicit,a=e.MAs(37),o=e.oxw(2);e.xp6(2),e.Q6J("ngIf",1==t.zapp_store_order),e.xp6(1),e.Q6J("ngIf",25==t.status_order),e.xp6(2),e.Q6J("ngIf",22==t.status_order),e.xp6(3),e.hij(" ORDEN #",t.id," "),e.xp6(2),e.hij(" ",t.date," "),e.xp6(6),e.Oqu(t.service_type),e.xp6(1),e.Q6J("ngForOf",o.filterFirstTwo(t.detail)),e.xp6(1),e.Q6J("ngIf",3==t.service_type_id),e.xp6(6),e.Oqu(e.gM2(25,17,1==t.zapp_store_order?t.total_zapp_store:t.total,"","symbol","1.0")),e.xp6(2),e.Q6J("ngIf",t.diligence),e.xp6(1),e.Q6J("ngIf",t.view_more),e.xp6(6),e.Q6J("ngIf",t.drivers.length>0),e.xp6(1),e.Q6J("offset",t.drivers.length>0?0:4),e.xp6(1),e.Q6J("ngIf",1!=t.zapp_store_order)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",22==t.status_order),e.xp6(3),e.Q6J("name",t.view_more?"chevron-up-outline":"chevron-down-outline")}}function $e(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"ion-list",15),e.YNc(2,Re,42,22,"ion-card",16),e.qZA(),e.TgZ(3,"ion-infinite-scroll",17),e.NdJ("ionInfinite",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.loadData(!1,o))}),e._UZ(4,"ion-infinite-scroll-content",18),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.orders)}}function Ge(n,r){1&n&&(e.TgZ(0,"ion-item",60)(1,"h4",61),e._uU(2,"No tiene ordenes en su historial en estas fechas"),e.qZA()())}const ze=function(n,r){return{"button-orange":n,"button-light":r}},Le=function(n,r){return{"button-yellow":n,"button-light":r}},Be=function(n,r){return{"button-green":n,"button-light":r}},Xe=[{path:"",component:(()=>{class n{constructor(t,a,o,i,s,d){this.request=t,this.ui=a,this.auth=o,this.router=i,this.realtime=s,this.error=d,this.orders=[],this.dataParams={total:0,per_page:5,page:1,filters:[]},this.state=0,this.store_states={52:{message:"Tu orden ha sido recibida y pronto ser\xe1 confirmada.",json:"/assets/lottie-files/1-confirmed.json",state:52,image:"/assets/imgs/1-confirmed.gif"},53:{message:"Tu orden ha sido confirmada y se est\xe1 preparando.",json:"/assets/lottie-files/2-order-packed.json",state:53,image:"/assets/imgs/2-order-packed.gif"},54:{message:"El mensajero va en camino a tu ubicaci\xf3n. ",json:"/assets/lottie-files/3-delivery-riding.json",state:54,image:"/assets/imgs/3-delivery-riding.gif"},55:{message:"\xa1El mensajero ha llegado! Recibe tu pedido. ",json:"/assets/lottie-files/4-food-delivery.json",state:55,image:"/assets/imgs/4-food-delivery.gif"},25:{message:"Finalizada",json:"/assets/lottie-files/5-ended.json",state:55,image:"/assets/imgs/6-order_success.gif"},31:{message:"Cancelada",json:"/assets/lottie-files/5-ended.json",state:55,image:"/assets/imgs/6-cancelled.gif"},36:{message:"Cancelada por mensajero",json:"/assets/lottie-files/5-ended.json",state:55,image:"/assets/imgs/7-order-cancelled-delivery.gif"},48:{message:"Orden no efectiva",json:"/assets/lottie-files/5-ended.json",state:48,image:"/assets/imgs/order_no_effective.gif"}}}ngOnInit(){}ionViewWillEnter(){return(0,x.mG)(this,void 0,void 0,function*(){this.state=0,this.dataParams.page=1;const t=new Date,a=(0,C.Z)(t,{days:1});this.min_date=this.formatDated(t),console.log("Fecha min",this.min_date),this.max_date=this.formatDated(a),console.log("Fecha max",this.max_date),t.getDate(),t.getMonth(),t.getFullYear(),console.log("Fecha max max"),this.max=this.formatDated(this.max_date),this.orders=[],this.loadData(!0)})}changeTime(t,a){return(0,x.mG)(this,void 0,void 0,function*(){(yield this.ui.presentModal(Te._,{inputType:"date",value:t,title:"Seleccione la fecha "},["modal-xs","height-date"])).onDidDismiss().then(i=>{console.log("Date ",t,i),i&&i.data.value&&("min_date"==a?(this.min_date=i.data.value,this.filterOrders(1)):(this.max_date=i.data.value,this.filterOrders(2)))})})}getTypeOf(t){return typeof t}getStoreState(t){return 1149==t.id&&(console.log("Order",t.id,"Item Status",t.status_order),console.log("Status",this.store_states[t.status_order])),this.store_states[t.status_order]}viewMore(t){t.view_more=t.view_more?0:1}filterFirstTwo(t){return t.filter((a,o)=>o>=0&&o<=1)}cancel(t){return(0,x.mG)(this,void 0,void 0,function*(){yield this.ui.presentAlert({mode:"ios",header:"\xbfEst\xe1s seguro que quieres cancelar la orden?",buttons:[{text:"No",role:"cancel",cssClass:"secondary",handler:a=>{}},{text:"S\xed",handler:a=>(0,x.mG)(this,void 0,void 0,function*(){yield this.ui.presentAlert({mode:"ios",header:"\xbfPor qu\xe9 desea cancelarla?",inputs:[{name:"why",id:"paragraph",type:"textarea",placeholder:"Raz\xf3n",mode:"ios"}],buttons:[{text:"Enviar",handler:o=>(0,x.mG)(this,void 0,void 0,function*(){(new FormData).append("description",o.why);const s={description:o.why},d=yield this.ui.loading("Por favor espere...");this.request.put("order/cancel_an_order/"+t.id,s).subscribe(c=>(0,x.mG)(this,void 0,void 0,function*(){(yield d).dismiss(),this.orders=this.orders.filter(l=>l.status_order>=22&&l.status_order<25)}),c=>(0,x.mG)(this,void 0,void 0,function*(){(yield d).dismiss(),yield this.ui.presentAlert({mode:"ios",header:"No se ha podido cancelar la orden",buttons:[{text:"Aceptar",role:"cancel",handler:()=>{}}]})}))})}]})})}]})})}changeState(t){this.orders=[],this.state=t,this.dataParams.page=1,this.loadData(!0)}loadData(t,a){return(0,x.mG)(this,void 0,void 0,function*(){let o;t||this.dataParams.page++,a||(o=yield this.ui.loading("Por favor espere...")),this.subcription&&this.subcription.unsubscribe(),this.request.get(this.getUrl()).subscribe(i=>(0,x.mG)(this,void 0,void 0,function*(){a||(yield o).dismiss(),console.log("Orders",i.data.data),i.data.data.map(s=>{const d=s.detail?s.detail:s.details;s.order_total=Number(s.total),s.total=Number(s.total),d.forEach(c=>{s.total+=Number(c.surplus_money)}),this.orders.push(s)}),this.orders.forEach(s=>{s.color="text-red",s.state_order="No asignada","23"==s.status_order?(s.color="text-orange",s.state_order="Asignada"):"24"==s.status_order?(s.color="text-yellow",s.state_order="En proceso"):"25"==s.status_order?(s.color="text-green",s.state_order="Finalizado"):"36"==s.status_order?(s.color="button-gray",s.state_order="Cancelada Msj"):"31"==s.status_order?(s.color="button-cancel",s.state_order="Cancelada"):"48"==s.status_order&&(s.color="button-cancel",s.state_order="No efectiva")}),a&&a.target.complete(),this.realtime.getFirebaseCollectionObject("order_detail_report/").subscribe(s=>{console.log("Res Detail Report",s);const d=Object.keys(s);d.length>0&&d.forEach(c=>{console.log("Res Detail Report key ",c);const l=this.orders.find(g=>g.id==Number(c));if(l&&(console.log("Res Detail Report Orden encontrada",l.id),1==l.diligence)){const g=Object.keys(s[c]);l.total=Number(l.order_total),l.total_time=0,g.forEach(h=>{const v=s[c][h];console.log("Res Detail Report Orden detalle",v);const p=v.total_charge?v.total_charge:0,T=v.timer;l.total_time+=T?T.minutes:0,l.total+=Number(p)})}})}),console.log("Url Subscribtion","status_order_mobile/"+this.auth.person.city_id+"/"+this.auth.user.id),this.subcription=this.realtime.getFirebaseCollectionList("status_order_mobile/"+this.auth.person.city_id+"/"+this.auth.user.id).subscribe(s=>{console.log("Res Subscription",s),null!=s&&s.length>0&&(console.log("Subscription 1"),0==this.state?(console.log("State 0"),s.map(d=>{const c=this.orders.find(l=>l.id==d.order_id);if(c)if(console.log(d.order_id,"Find"),console.log("Find",d.order_id,d.order),d.drivers&&d.drivers.length>0&&(c.drivers=d.drivers),0==d.order.zapp_store_order)console.log("Not Store"),c.status_order=d.status_order,c.color="text-red",c.state_order="No asignada","23"==c.status_order?(c.color="text-orange",c.state_order="Asignada"):"24"==c.status_order?(c.color="text-yellow",c.state_order="En proceso"):"25"==c.status_order?(c.color="text-green",c.state_order="Finalizado",this.showQualification(c)):"36"==c.status_order?(c.color="button-gray",c.state_order="Cancelada Msj"):"31"==c.status_order?(c.color="button-cancel",c.state_order="Cancelada"):"48"==c.status_order&&(c.color="button-cancel",c.state_order="No efectiva");else{console.log(" Store",d),d.status_order||(d.status_order=52),c.status_order=d.status_order;const l=this.orders.findIndex(g=>g.id==d.order_id);-1!=l&&(this.orders[l].status_order=c.status_order),console.log("Orders",this.orders),console.log("Store Order",c),c.color="text-red"}})):(console.log("State not 0"),console.log("Aqu\xediiii"),s.map(d=>{const c=this.orders.find(l=>l.id==d.order_id);if(c){d.drivers&&d.drivers.length>0&&(c.drivers=d.drivers);let l="Su orden #"+c.id;c.status_order!=d.status_order&&(c.status_order=d.status_order,c.color="text-red",c.state_order="No asignada","23"==c.status_order?(c.color="text-orange",c.state_order="Asignada",l+=" ha sido asignada"):"24"==c.status_order?(c.color="text-yellow",c.state_order="En proceso",l+=" est\xe1 en proceso"):"25"==c.status_order?(c.color="text-green",l+="ha sido finalizada",c.state_order="Finalizado",this.showQualification(c)):"36"==c.status_order?(c.color="button-gray",c.state_order="Cancelada Msj"):"31"==c.status_order&&(c.color="button-cancel",c.state_order="Cancelada"),"31"!=c.status_order?this.ui.showToast(l,()=>{this.orders=this.orders.filter(g=>g.status_order==this.state)}):this.orders=this.orders.filter(g=>g.status_order==this.state))}})))})}),i=>(0,x.mG)(this,void 0,void 0,function*(){a&&i.status&&400==i.status?(a.target.complete(),a.target.disabled=!0):((yield o).dismiss(),i.status||this.error.response(i),i.status&&400!=i.status&&this.error.response(i))}))})}formatDate(t){const a=t.getDate(),o=t.getMonth()+1;return t.getFullYear()+"-"+o+"-"+a}format(t){console.log("Date",t);var a=function be(n,r,t){var a,o,i,s,d,c,l,g,h,v,p,T,W,k,F,B,X,K;(0,y.Z)(2,arguments);var tn=String(r),q=j(),H=null!==(a=null!==(o=null==t?void 0:t.locale)&&void 0!==o?o:q.locale)&&void 0!==a?a:me,V=(0,O.Z)(null!==(i=null!==(s=null!==(d=null!==(c=null==t?void 0:t.firstWeekContainsDate)&&void 0!==c?c:null==t||null===(l=t.locale)||void 0===l||null===(g=l.options)||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==d?d:q.firstWeekContainsDate)&&void 0!==s?s:null===(h=q.locale)||void 0===h||null===(v=h.options)||void 0===v?void 0:v.firstWeekContainsDate)&&void 0!==i?i:1);if(!(V>=1&&V<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var tt=(0,O.Z)(null!==(p=null!==(T=null!==(W=null!==(k=null==t?void 0:t.weekStartsOn)&&void 0!==k?k:null==t||null===(F=t.locale)||void 0===F||null===(B=F.options)||void 0===B?void 0:B.weekStartsOn)&&void 0!==W?W:q.weekStartsOn)&&void 0!==T?T:null===(X=q.locale)||void 0===X||null===(K=X.options)||void 0===K?void 0:K.weekStartsOn)&&void 0!==p?p:0);if(!(tt>=0&&tt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!H.localize)throw new RangeError("locale must contain localize property");if(!H.formatLong)throw new RangeError("locale must contain formatLong property");var R=(0,b.Z)(n);if(!S(R))throw new RangeError("Invalid time value");var en=Mt(R),nn=ut(R,en),rn={firstWeekContainsDate:V,weekStartsOn:tt,locale:H,_originalDate:R};return tn.match(_e).map(function(P){var D=P[0];return"p"===D||"P"===D?(0,Pt[D])(P,H.formatLong):P}).join("").match(he).map(function(P){if("''"===P)return"'";var D=P[0];if("'"===D)return we(P);var $=xt[D];if($)return!(null!=t&&t.useAdditionalWeekYearTokens)&&Ut(P)&&dt(P,r,String(n)),!(null!=t&&t.useAdditionalDayOfYearTokens)&&Dt(P)&&dt(P,r,String(n)),$(nn,P,H.localize,rn);if(D.match(ye))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return P}).join("")}(new Date(t),"yyyy/MM/DD");return a}getUrl(){const t=this.min_date,a=this.max_date;console.log("Data Params",this.dataParams);const o="customer/orders_completed?customer_id="+this.auth.user.id+"&start_date="+t+"&end_date="+a+"&per_page=10&page="+this.dataParams.page+"&status_order="+this.state+"&request_form='app-customer'";return console.log("Url",o),o}formatDated(t){let a=new Date(t),o=""+a.getDate(),i=""+(a.getMonth()+1),s=a.getFullYear();return i.length<2&&(i="0"+i),o.length<2&&(o="0"+o),console.log("Fecha",[s,i,o].join("-")),[s,i,o].join("-")}showQualification(t){console.log("Qualification"),t.score_service||t.score_service>0||(console.log("Pass"),this.ui.presentModal(xe.W,{order:t,driver:t.drivers[0]}))}filterOrders(t){return(0,x.mG)(this,void 0,void 0,function*(){if(new Date(this.min_date)<=new Date(this.max_date)){this.dataParams.page=1,this.orders=[];const i=yield this.ui.loading("Por favor espere...");this.request.get(this.getUrl()).subscribe(s=>(0,x.mG)(this,void 0,void 0,function*(){(yield i).dismiss(),console.log("res",s.data.data),s.data.data.map(d=>{const c=d.detail?d.detail:d.details;d.order_total=Number(d.total),d.total=Number(d.total),c.forEach(l=>{d.total+=Number(l.surplus_money)}),this.orders.push(d)}),console.log("res",s.data.data),this.orders.forEach(d=>{d.color="text-red",d.state_order="No asignada","23"==d.status_order?(d.color="text-orange",d.state_order="Asignada"):"24"==d.status_order?(d.color="text-yellow",d.state_order="En proceso"):"25"==d.status_order?(d.color="text-green",d.state_order="Finalizado"):"36"==d.status_order?(d.color="button-gray",d.state_order="Cancelada Msj"):"31"==d.status_order?(d.color="button-cancel",d.state_order="Cancelada"):"48"==d.status_order&&(d.color="button-cancel",d.state_order="No efectiva")}),this.realtime.getFirebaseCollectionObject("order_detail_report/").subscribe(d=>{console.log("Res Detail Report",d);const c=Object.keys(d);c.length>0&&c.forEach(l=>{console.log("Res Detail Report key ",l);const g=this.orders.find(h=>h.id==Number(l));if(g&&(console.log("Res Detail Report Orden encontrada",g.id),1==g.diligence)){const h=Object.keys(d[l]);g.total=Number(g.order_total),g.total_time=0,h.forEach(v=>{const p=d[l][v];console.log("Detail",p),g.total+=Number(p.total_charge?p.total_charge:0)})}})})}),s=>(0,x.mG)(this,void 0,void 0,function*(){(yield i).dismiss()}))}else yield this.ui.presentAlert({mode:"ios",header:"Advertencia",message:"La fecha de inicio debe ser menor a la fecha final",buttons:[{text:"Aceptar",role:"cancel",cssClass:"secondary",handler:i=>{}}]})})}goToTransportType(){localStorage.setItem("step","1"),this.router.navigate(["tabs/transport-type"])}view_order(t){return(0,x.mG)(this,void 0,void 0,function*(){(yield this.ui.presentModal(G.G,{order:t,fromHistory:!0},["custom-modal"])).onDidDismiss().then(o=>{})})}view_driver(t){console.log("R"),this.ui.presentPopover(z.B,{driver:t.drivers,order:t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ce.s),e.Y36(Pe.F),e.Y36(Me.e),e.Y36(M.F0),e.Y36(Oe.i),e.Y36(Ze.Y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-history"]],decls:43,vars:28,consts:[[1,"ion-text-center"],[2,"width","90%","margin","auto","text-align","center"],[2,"font-size","0.7em","width","100px",3,"color","click"],[2,"font-size","0.7em","width","100px",3,"ngClass","click"],[1,"row","justify-content-center"],[1,"col-sm-6","ion-text-center","w-50",2,"padding","0 10px"],[1,"input-text","date"],["displayFormat","DD/MM/YYYY","cancelText","Cancelar","doneText","Guardar","mode","ios",1,"hidden",3,"max","ngModel","ngModelChange"],["init",""],["fill","clear","slot","end",2,"padding","0","margin","0",3,"click"],["name","calendar-outline"],["displayFormat","DD/MM/YYYY","cancelText","Cancelar","doneText","Guardar","mode","ios",1,"input-text","hidden",3,"ngModel","ngModelChange"],["end",""],[4,"ngIf","ngIfElse"],["elseT",""],["mode","ios"],["style","margin-bottom: 10px;",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],[2,"margin-bottom","10px"],[1,"ion-text-right"],["name","storefront","class","ion-text-left","style","float: left;\n          font-size: 2em;\n          margin-top: 5px;\n          margin-left: 10px;\n          color: #49158c;",4,"ngIf"],["fill","clear","size","small","style","",3,"click",4,"ngIf"],[2,"padding-top","0px","padding-bottom","0px"],["style","--border-radius: 50%;\n          width: 25px;\n          height: 25px;\n          font-size: 0.5em;\n          text-align: center;","color","danger","size","small",3,"ngClass","click",4,"ngIf"],[2,"width","100%","display","flex"],[1,"w-50"],[2,"width","50%","text-align","right"],[1,"row"],[1,"",2,"font-size","0.8em"],["class","row",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"ion-text-center",2,"transition","all ease 2s"],["size","4",3,"click"],[2,"height","40px","width","70px","font-size","14px","font-weight","bold"],["name","eye-outline"],["size","4",3,"click",4,"ngIf"],["size","4",3,"offset"],["elseTe",""],["class","ion-text-center",3,"ngClass",4,"ngIf"],[1,"row","ion-text-center","justify-content-center",3,"click"],["fill","clear",2,"height","20px"],[3,"name"],["name","storefront",1,"ion-text-left",2,"float","left","font-size","2em","margin-top","5px","margin-left","10px","color","#49158c"],["fill","clear","size","small",3,"click"],["name","star",3,"ngClass"],["color","danger","size","small",2,"--border-radius","50%","width","25px","height","25px","font-size","0.5em","text-align","center",3,"ngClass","click"],["name","close"],[2,"font-size","0.7em"],[1,""],[2,"width","50%"],[2,"font-size","0.8em"],["expand","block","color","success",2,"height","40px","width","40px","font-size","10px","font-weight","bold","margin","auto"],["name","person-outline"],[2,"margin-top","20px"],["fill","clear","class","no-inner-padding state","size","small",4,"ngIf"],["fill","clear","size","small",1,"no-inner-padding","state"],["alt","","srcset","",3,"src"],[1,"ion-text-center",3,"ngClass"],["lines","none"],[1,"ion-text-center",2,"width","100%"]],template:function(t,a){if(1&t&&(e.TgZ(0,"h5",0),e._uU(1,"Historial de ordenes"),e.qZA(),e.TgZ(2,"div",1)(3,"ion-button",2),e.NdJ("click",function(){return a.changeState(22)}),e._uU(4,"No asignadas"),e.qZA(),e.TgZ(5,"ion-button",3),e.NdJ("click",function(){return a.changeState(23)}),e._uU(6,"Asignadas"),e.qZA(),e.TgZ(7,"ion-button",3),e.NdJ("click",function(){return a.changeState(24)}),e._uU(8,"En proceso"),e.qZA(),e.TgZ(9,"ion-button",3),e.NdJ("click",function(){return a.changeState(25)}),e._uU(10,"Finalizadas"),e.qZA(),e.TgZ(11,"ion-button",2),e.NdJ("click",function(){return a.changeState(31)}),e._uU(12,"Canceladas"),e.qZA(),e.TgZ(13,"ion-button",2),e.NdJ("click",function(){return a.changeState(0)}),e._uU(14," Todas"),e.qZA(),e.TgZ(15,"div",4)(16,"div",5)(17,"h4",0),e._uU(18,"Fecha Inicio "),e.qZA(),e.TgZ(19,"ion-item",6)(20,"label"),e._uU(21),e.ALo(22,"date"),e.qZA(),e.TgZ(23,"ion-datetime",7,8),e.NdJ("ngModelChange",function(i){return a.min_date=i})("ngModelChange",function(){return a.filterOrders(1)}),e.qZA(),e.TgZ(25,"ion-button",9),e.NdJ("click",function(){return a.changeTime(a.min_date,"min_date")}),e._UZ(26,"ion-icon",10),e.qZA()()(),e.TgZ(27,"div",5)(28,"h4",0),e._uU(29,"Fecha Fin "),e.qZA(),e.TgZ(30,"ion-item",6)(31,"label"),e._uU(32),e.ALo(33,"date"),e.qZA(),e.TgZ(34,"ion-datetime",11,12),e.NdJ("ngModelChange",function(i){return a.max_date=i})("ngModelChange",function(){return a.filterOrders(2)}),e.qZA(),e.TgZ(36,"ion-button",9),e.NdJ("click",function(){return a.changeTime(a.max_date,"max_date")}),e._UZ(37,"ion-icon",10),e.qZA()()()()(),e._UZ(38,"hr"),e.TgZ(39,"ion-content"),e.YNc(40,$e,5,1,"ng-container",13),e.YNc(41,Ge,3,0,"ng-template",null,14,e.W1O),e.qZA()),2&t){const o=e.MAs(42);e.xp6(3),e.Q6J("color",22==a.state?"danger":"light"),e.xp6(2),e.Q6J("ngClass",e.WLB(19,ze,23==a.state,23!=a.state)),e.xp6(2),e.Q6J("ngClass",e.WLB(22,Le,24==a.state,24!=a.state)),e.xp6(2),e.Q6J("ngClass",e.WLB(25,Be,25==a.state,25!=a.state)),e.xp6(2),e.Q6J("color",31==a.state?"medium":"light"),e.xp6(2),e.Q6J("color",0==a.state?"primary":"light"),e.xp6(8),e.hij("",e.xi3(22,13,a.min_date,"dd/MM/yyyy")," "),e.xp6(2),e.Q6J("max",a.max_date)("ngModel",a.min_date),e.xp6(9),e.hij("",e.xi3(33,16,a.max_date,"dd/MM/yyyy")," "),e.xp6(2),e.Q6J("ngModel",a.max_date),e.xp6(6),e.Q6J("ngIf",a.orders.length>0)("ngIfElse",o)}},dependencies:[u.mk,u.sg,u.O5,Y.JJ,Y.On,w.YG,w.PM,w.FN,w.wI,w.W2,w.x4,w.gu,w.ju,w.MB,w.Ie,w.q_,w.Nd,w.QI,u.H9,u.uU],styles:[".button-orange[_ngcontent-%COMP%]{--background: orange;color:#fff}.text-orange[_ngcontent-%COMP%]{color:orange}.button-yellow[_ngcontent-%COMP%]{--background: #c6c73a;color:#fff}.text-yellow[_ngcontent-%COMP%]{color:#c6c73a}.button-light[_ngcontent-%COMP%]{--background: #ffffff;color:#49158c}ion-button.state[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;width:50px;min-width:50px;min-height:50px}ion-button.state.completed[_ngcontent-%COMP%]{height:100%;font-size:1.5em}ion-button.state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5em}ion-button.state[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], ion-button.state[_ngcontent-%COMP%]   lottie-player[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:100%}ion-button.border-top-gray[_ngcontent-%COMP%]{border-top:1px solid #ccc}.button-green[_ngcontent-%COMP%]{--background: green;color:#fff}.text-green[_ngcontent-%COMP%]{color:green}.button-red[_ngcontent-%COMP%]{--background: red;color:#fff}.text-red[_ngcontent-%COMP%]{color:red}.button-gray[_ngcontent-%COMP%]{--background: #CE4257;color:#ce4257}.button-cancel[_ngcontent-%COMP%]{--background: #95B2B0;color:#95b2b0}"]}),n})()}];let Ke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[M.Bz.forChild(Xe),M.Bz]}),n})(),Ve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,Y.u5,w.Pc,Ke]}),n})()}}]);