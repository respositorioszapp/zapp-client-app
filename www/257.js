"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[257],{257:(R,_,r)=>{r.r(_),r.d(_,{LoginPageModule:()=>O});var f=r(9808),u=r(4182),p=r(9928),m=r(3769),c=r(655);const A=(0,r(7423).fo)("GoogleAuth",{web:()=>r.e(9666).then(r.bind(r,9666)).then(n=>new n.GoogleAuthWeb)});var e=r(5e3),T=r(1892),v=r(7556),N=r(3505),I=r(1335),s=r(3228),h=function(n){function t(){var o=null!==n&&n.apply(this,arguments)||this;return o.EVENTS={EVENT_NAME_ACTIVATED_APP:"fb_mobile_activate_app",EVENT_NAME_DEACTIVATED_APP:"fb_mobile_deactivate_app",EVENT_NAME_SESSION_INTERRUPTIONS:"fb_mobile_app_interruptions",EVENT_NAME_TIME_BETWEEN_SESSIONS:"fb_mobile_time_between_sessions",EVENT_NAME_COMPLETED_REGISTRATION:"fb_mobile_complete_registration",EVENT_NAME_VIEWED_CONTENT:"fb_mobile_content_view",EVENT_NAME_SEARCHED:"fb_mobile_search",EVENT_NAME_RATED:"fb_mobile_rate",EVENT_NAME_COMPLETED_TUTORIAL:"fb_mobile_tutorial_completion",EVENT_NAME_PUSH_TOKEN_OBTAINED:"fb_mobile_obtain_push_token",EVENT_NAME_ADDED_TO_CART:"fb_mobile_add_to_cart",EVENT_NAME_ADDED_TO_WISHLIST:"fb_mobile_add_to_wishlist",EVENT_NAME_INITIATED_CHECKOUT:"fb_mobile_initiated_checkout",EVENT_NAME_ADDED_PAYMENT_INFO:"fb_mobile_add_payment_info",EVENT_NAME_PURCHASED:"fb_mobile_purchase",EVENT_NAME_ACHIEVED_LEVEL:"fb_mobile_level_achieved",EVENT_NAME_UNLOCKED_ACHIEVEMENT:"fb_mobile_achievement_unlocked",EVENT_NAME_SPENT_CREDITS:"fb_mobile_spent_credits",EVENT_PARAM_CURRENCY:"fb_currency",EVENT_PARAM_REGISTRATION_METHOD:"fb_registration_method",EVENT_PARAM_CONTENT_TYPE:"fb_content_type",EVENT_PARAM_CONTENT_ID:"fb_content_id",EVENT_PARAM_SEARCH_STRING:"fb_search_string",EVENT_PARAM_SUCCESS:"fb_success",EVENT_PARAM_MAX_RATING_VALUE:"fb_max_rating_value",EVENT_PARAM_PAYMENT_INFO_AVAILABLE:"fb_payment_info_available",EVENT_PARAM_NUM_ITEMS:"fb_num_items",EVENT_PARAM_LEVEL:"fb_level",EVENT_PARAM_DESCRIPTION:"fb_description",EVENT_PARAM_SOURCE_APPLICATION:"fb_mobile_launch_source",EVENT_PARAM_VALUE_YES:"1",EVENT_PARAM_VALUE_NO:"0"},o}return(0,c.ZT)(t,n),t.prototype.getApplicationId=function(){return(0,s.DM)(this,"getApplicationId",{},arguments)},t.prototype.setApplicationId=function(o){return(0,s.DM)(this,"setApplicationId",{},arguments)},t.prototype.getApplicationName=function(){return(0,s.DM)(this,"getApplicationName",{},arguments)},t.prototype.setApplicationName=function(o){return(0,s.DM)(this,"setApplicationName",{},arguments)},t.prototype.login=function(o){return(0,s.DM)(this,"login",{},arguments)},t.prototype.loginWithLimitedTracking=function(o){return(0,s.DM)(this,"loginWithLimitedTracking",{},arguments)},t.prototype.checkHasCorrectPermissions=function(o){return(0,s.DM)(this,"checkHasCorrectPermissions",{},arguments)},t.prototype.isDataAccessExpired=function(){return(0,s.DM)(this,"isDataAccessExpired",{},arguments)},t.prototype.reauthorizeDataAccess=function(){return(0,s.DM)(this,"reauthorizeDataAccess",{},arguments)},t.prototype.logout=function(){return(0,s.DM)(this,"logout",{},arguments)},t.prototype.getLoginStatus=function(){return(0,s.DM)(this,"getLoginStatus",{},arguments)},t.prototype.getAccessToken=function(){return(0,s.DM)(this,"getAccessToken",{},arguments)},t.prototype.getCurrentProfile=function(){return(0,s.DM)(this,"getCurrentProfile",{},arguments)},t.prototype.showDialog=function(o){return(0,s.DM)(this,"showDialog",{},arguments)},t.prototype.api=function(o,i,a){return(0,s.DM)(this,"api",{},arguments)},t.prototype.setDataProcessingOptions=function(o,i,a){return(0,s.DM)(this,"setDataProcessingOptions",{},arguments)},t.prototype.setUserData=function(o){return(0,s.DM)(this,"setUserData",{},arguments)},t.prototype.clearUserData=function(){return(0,s.DM)(this,"clearUserData",{},arguments)},t.prototype.logEvent=function(o,i,a){return(0,s.DM)(this,"logEvent",{successIndex:3,errorIndex:4},arguments)},t.prototype.setAutoLogAppEventsEnabled=function(o){return(0,s.DM)(this,"setAutoLogAppEventsEnabled",{successIndex:1,errorIndex:2},arguments)},t.prototype.setAdvertiserIDCollectionEnabled=function(o){return(0,s.DM)(this,"setAdvertiserIDCollectionEnabled",{},arguments)},t.prototype.setAdvertiserTrackingEnabled=function(o){return(0,s.DM)(this,"setAdvertiserTrackingEnabled",{},arguments)},t.prototype.logPurchase=function(o,i,a){return(0,s.DM)(this,"logPurchase",{},arguments)},t.prototype.getDeferredApplink=function(){return(0,s.DM)(this,"getDeferredApplink",{},arguments)},t.prototype.activateApp=function(){return(0,s.DM)(this,"activateApp",{},arguments)},t.pluginName="Facebook",t.plugin="cordova-plugin-facebook-connect",t.pluginRef="facebookConnectPlugin",t.repo="https://github.com/cordova-plugin-facebook-connect/cordova-plugin-facebook-connect",t.install='ionic cordova plugin add cordova-plugin-facebook-connect --variable APP_ID="123456789" --variable APP_NAME="myApplication"',t.installVariables=["APP_ID","APP_NAME"],t.platforms=["Android","iOS","Browser"],t.\u0275fac=function(){var o;return function(a){return(o||(o=e.n5z(t)))(a||t)}}(),t.\u0275prov=e.Yz7({token:t,factory:function(o){return t.\u0275fac(o)}}),t}(s.On),E=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return(0,c.ZT)(t,n),t.prototype.login=function(o){return(0,s.DM)(this,"login",{successIndex:1,errorIndex:2},arguments)},t.prototype.trySilentLogin=function(o){return(0,s.DM)(this,"trySilentLogin",{},arguments)},t.prototype.logout=function(){return(0,s.DM)(this,"logout",{},arguments)},t.prototype.disconnect=function(){return(0,s.DM)(this,"disconnect",{},arguments)},t.prototype.getSigningCertificateFingerprint=function(){return(0,s.DM)(this,"getSigningCertificateFingerprint",{},arguments)},t.pluginName="GooglePlus",t.plugin="cordova-plugin-googleplus",t.pluginRef="window.plugins.googleplus",t.repo="https://github.com/EddyVerbruggen/cordova-plugin-googleplus",t.install="ionic cordova plugin add cordova-plugin-googleplus --variable REVERSED_CLIENT_ID=myreversedclientid",t.installVariables=["REVERSED_CLIENT_ID"],t.platforms=["Android","iOS"],t.\u0275fac=function(){var o;return function(a){return(o||(o=e.n5z(t)))(a||t)}}(),t.\u0275prov=e.Yz7({token:t,factory:function(o){return t.\u0275fac(o)}}),t}(s.On);function D(n,t){1&n&&(e.TgZ(0,"ion-label"),e._uU(1,"Email es requerido"),e.qZA())}function M(n,t){1&n&&(e.TgZ(0,"ion-label"),e._uU(1,"Debe ser un email v\xe1lido"),e.qZA())}function P(n,t){if(1&n&&(e.TgZ(0,"ion-item",20),e._UZ(1,"ion-icon",21),e.YNc(2,D,2,0,"ion-label",22),e.YNc(3,M,2,0,"ion-label",22),e.qZA()),2&n){const o=e.oxw();e.xp6(2),e.Q6J("ngIf",o.controls.email.errors.required),e.xp6(1),e.Q6J("ngIf",o.controls.email.errors.email)}}function y(n,t){1&n&&(e.TgZ(0,"ion-label"),e._uU(1,"La contrase\xf1a es requerida"),e.qZA())}function S(n,t){1&n&&(e.TgZ(0,"ion-label"),e._uU(1,"La contrase\xf1a debe ser de 8 a 16 caracteres"),e.qZA())}function L(n,t){if(1&n&&(e.TgZ(0,"ion-item",20),e._UZ(1,"ion-icon",21),e.YNc(2,y,2,0,"ion-label",22),e.YNc(3,S,2,0,"ion-label",22),e.qZA()),2&n){const o=e.oxw();e.xp6(2),e.Q6J("ngIf",o.controls.password.errors.required),e.xp6(1),e.Q6J("ngIf",o.controls.password.errors.minlength||o.controls.password.errors.maxlength)}}const w=[{path:"",component:(()=>{class n{constructor(o,i,a,l,g,d,V){this.ui=o,this.auth=i,this.router=a,this.fcm=l,this.request=g,this.fb=d,this.googlePlus=V,this.view=!1,this.loginData=new u.cw({email:new u.NI("",[u.kI.required]),password:new u.NI("",[u.kI.required,u.kI.minLength(8),u.kI.maxLength(20)])})}setView(){this.view=!this.view}ngOnInit(){localStorage.removeItem("isLoggedIn"),localStorage.removeItem("data"),localStorage.removeItem("current_order"),localStorage.removeItem("current_status"),localStorage.removeItem("current_status"),localStorage.removeItem("currentDocuments"),localStorage.removeItem("longitude"),localStorage.removeItem("latitude"),localStorage.removeItem("watchPositionId")}ionViewDidEnter(){A.init()}get controls(){return this.loginData.controls}signinInvited(){return(0,c.mG)(this,void 0,void 0,function*(){const o=this.ui.loading("Por favor espere...");this.auth.login("invitado@zapplogistica.com","123456789").subscribe(i=>(0,c.mG)(this,void 0,void 0,function*(){(yield o).dismiss(),console.log("Version",i.data.code_version),3==i.data.role.id||4==i.data.role.id?(console.log("Rol id",i.data),localStorage.setItem("isLoggedIn","si"),localStorage.setItem("data",JSON.stringify(i.data)),this.auth.setData(),this.sendToken(),this.auth.user.last_login_date=Date.now(),this.auth.setUser(this.auth.user),this.router.navigate(["/tabs/"])):this.ui.showToast("El usuario existe, pero  no tiene acceso a esta aplicaci\xf3n")}),i=>(0,c.mG)(this,void 0,void 0,function*(){(yield o).dismiss(),this.ui.showToast(i.error.messages?i.error.messages[0]:"Ocurri\xf3 un error de conexi\xf3n")}))})}send(){return(0,c.mG)(this,void 0,void 0,function*(){if(this.loginData.valid){let{email:o,password:i}=this.loginData.value;const a=this.ui.loading("Por favor espere...");o=o.replace(/\s/g,""),i=i.replace(/\s/g,""),this.auth.login(o,i).subscribe(l=>(0,c.mG)(this,void 0,void 0,function*(){(yield a).dismiss(),console.log("Version",l.data.code_version),3==l.data.role.id||4==l.data.role.id?(console.log("Rol id",l.data),localStorage.setItem("isLoggedIn","si"),localStorage.setItem("data",JSON.stringify(l.data)),this.auth.setData(),this.sendToken(),this.auth.user.last_login_date=Date.now(),this.auth.setUser(this.auth.user),this.router.navigate(["/tabs/"])):this.ui.showToast("El usuario existe, pero  no tiene acceso a esta aplicaci\xf3n")}),l=>(0,c.mG)(this,void 0,void 0,function*(){(yield a).dismiss(),this.ui.showToast(l.error.messages?l.error.messages[0]:"Ocurri\xf3 un error de conexi\xf3n")}))}})}sendToken(){if(localStorage.getItem("fcmId")){const o={user_id:this.auth.user.id,token:localStorage.getItem("fcmId"),platform:"mobile"};this.request.post("get_token",o).subscribe(i=>{},i=>{})}}loginFacebook(){this.fb.login(["public_profile","email"]).then(o=>{console.log("Logged into Facebook!",o);let i=o.authResponse.userID;console.log(i),this.getUserDetail(i)}).catch(o=>console.log("Error logging into Facebook",o))}getUserDetail(o){this.fb.api("/"+o+"/?fields=id,email",["public_profile"]).then(i=>{console.log(i);let a=i.id;console.log(a);let l=i.email;console.log(l);const g=this.ui.loading("Por favor espere...");this.auth.loginNetwork(l,a,"facebook").subscribe(d=>(0,c.mG)(this,void 0,void 0,function*(){(yield g).dismiss(),console.log("Version",d.data.code_version),3==d.data.role.id||4==d.data.role.id?(console.log("Rol id",d.data),localStorage.setItem("isLoggedIn","si"),localStorage.setItem("data",JSON.stringify(d.data)),this.auth.setData(),this.sendToken(),this.auth.user.last_login_date=Date.now(),this.auth.setUser(this.auth.user),this.router.navigate(["/tabs/"])):this.ui.showToast("El usuario existe, pero  no tiene acceso a esta aplicaci\xf3n")}),d=>(0,c.mG)(this,void 0,void 0,function*(){(yield g).dismiss(),this.ui.showToast(d.error.messages?d.error.messages[0]:"Ocurri\xf3 un error de conexi\xf3n")}))}).catch(i=>{alert("Error getUserDetail")})}loginGoogle(){return(0,c.mG)(this,void 0,void 0,function*(){console.log("loginGoogle"),this.googlePlus.login({scopes:"profile email",webClientId:"109401557615-0u5mvavjg3apsdmidr5hkkaccgrkmqn7.apps.googleusercontent.com",offline:!0}).then(o=>{console.log("res",o),console.log("user",o);let i=o.userId;console.log(i);let a=o.email;console.log(a);const l=this.ui.loading("Por favor espere...");this.auth.loginNetwork(a,i,"google").subscribe(g=>(0,c.mG)(this,void 0,void 0,function*(){(yield l).dismiss(),console.log("Version",g.data.code_version),3==g.data.role.id||4==g.data.role.id?(console.log("Rol id",g.data),localStorage.setItem("isLoggedIn","si"),localStorage.setItem("data",JSON.stringify(g.data)),this.auth.setData(),this.sendToken(),this.auth.user.last_login_date=Date.now(),this.auth.setUser(this.auth.user),this.router.navigate(["/tabs/"])):this.ui.showToast("El usuario existe, pero  no tiene acceso a esta aplicaci\xf3n")}),g=>(0,c.mG)(this,void 0,void 0,function*(){(yield l).dismiss(),this.ui.showToast(g.error.messages?g.error.messages[0]:"Ocurri\xf3 un error de conexi\xf3n")}))}).catch(o=>{console.error("err",o)})})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(T.F),e.Y36(v.e),e.Y36(m.F0),e.Y36(N.E),e.Y36(I.s),e.Y36(h),e.Y36(E))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:30,vars:5,consts:[[1,"ion-padding","warning-gradient"],[1,"ion-text-center","ion-padding-bottom",2,"margin-top","90px"],["src","assets/imgs/logo zapp.png"],[2,"width","100%","margin","25% auto"],["novalidate","",3,"formGroup","submit"],["lines","none",1,"input-text","ion-margin-top","ion-margin-bottom"],["name","mail-outline"],["type","text","placeholder","Email","autocomplete","new-password","formControlName","email","required",""],["lines","none","class","danger-color-text",4,"ngIf"],["name","lock-closed-outline"],["placeholder","Password","formControlName","password","autocomplete","new-password","required","",3,"type"],["slot","end",3,"name","click"],["lines","none"],["routerLink","/forgot-password",1,"button-password"],["routerLink","/select-type",1,"button-signup"],["type","submit","expand","block","mode","ios","color","primary",1,"ion-margin-bottom","button-login"],[1,"ion-text-center",2,"width","100%"],["expand","block","mode","ios","fill","outline",1,"ion-margin-bottom","button-general",3,"click"],["fill","outline","expand","block","mode","ios",1,"button-general","button-facebook",3,"click"],["fill","outline","expand","block","mode","ios",1,"button-general","button-google",3,"click"],["lines","none",1,"danger-color-text"],["name","alert-circle","slot","start",1,"danger-color-text"],[4,"ngIf"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-content",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"form",4),e.NdJ("submit",function(){return i.send()}),e.TgZ(5,"ion-item",5),e._UZ(6,"ion-icon",6)(7,"ion-input",7),e.qZA(),e.YNc(8,P,4,2,"ion-item",8),e.TgZ(9,"ion-item",5),e._UZ(10,"ion-icon",9)(11,"ion-input",10),e.TgZ(12,"ion-icon",11),e.NdJ("click",function(){return i.setView()}),e.qZA()(),e.YNc(13,L,4,2,"ion-item",8),e.TgZ(14,"ion-item",12)(15,"span",13),e._uU(16,"\xbfOlvidaste tu contrase\xf1a?"),e.qZA(),e.TgZ(17,"span",14),e._uU(18,"REGISTRARSE"),e.qZA()(),e.TgZ(19,"ion-button",15),e._uU(20," INICIAR SESI\xd3N "),e.qZA(),e.TgZ(21,"ion-item",12)(22,"div",16),e._uU(23," O "),e.qZA()(),e.TgZ(24,"ion-button",17),e.NdJ("click",function(){return i.signinInvited()}),e._uU(25," ENTRAR COMO INVITADO "),e.qZA(),e.TgZ(26,"ion-button",18),e.NdJ("click",function(){return i.loginFacebook()}),e._uU(27," INICIAR SESI\xd3N CON FACEBOOK "),e.qZA(),e.TgZ(28,"ion-button",19),e.NdJ("click",function(){return i.loginGoogle()}),e._uU(29," INICIAR SESI\xd3N CON GOOGLE "),e.qZA()()()()),2&o&&(e.xp6(4),e.Q6J("formGroup",i.loginData),e.xp6(4),e.Q6J("ngIf",i.controls.email.dirty&&i.controls.email.touched&&i.controls.email.errors),e.xp6(3),e.Q6J("type",i.view?"text":"password"),e.xp6(1),e.Q6J("name",i.view?"eye-outline":"eye-off-outline"),e.xp6(1),e.Q6J("ngIf",i.controls.password.dirty&&i.controls.password.touched&&i.controls.password.errors))},dependencies:[f.O5,u._Y,u.JJ,u.JL,u.Q7,u.sg,u.u,p.YG,p.W2,p.gu,p.pK,p.Ie,p.Q$,p.j9,p.YI,m.rH],styles:[".button-login[_ngcontent-%COMP%]{width:90%;margin:auto;text-transform:capitalize;font-weight:700}.button-general[_ngcontent-%COMP%]{width:90%;margin:auto auto 5%;text-transform:capitalize;font-weight:700}.button-password[_ngcontent-%COMP%]{text-align:left;font-size:12px;width:100%}.button-signup[_ngcontent-%COMP%]{text-align:right;font-size:12px;width:100%;color:#49168c;font-weight:700}.button-facebook[_ngcontent-%COMP%]{--background: #415792;color:#fff}.button-google[_ngcontent-%COMP%]{--background: #b92f2a;color:#fff}"]}),n})()}];let k=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.Bz.forChild(w),m.Bz]}),n})(),O=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[h,E],imports:[f.ez,u.u5,u.UX,p.Pc,k]}),n})()}}]);