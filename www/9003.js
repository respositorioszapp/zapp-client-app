"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9003,2522,7628,8006],{2522:(P,M,s)=>{s.d(M,{v:()=>u});var m=s(5e3),q=s(9928);let u=(()=>{class c{constructor(){this.step=1,this.percent=0}ngOnInit(){console.log("Stepper ng oninit"),localStorage.getItem("step")&&(this.step=Number(localStorage.getItem("step")),this.percent=Number(this.step/8))}}return c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=m.Xpm({type:c,selectors:[["app-stepper"]],decls:1,vars:1,consts:[[2,"height","5px","--background","transparent","min-width","100%",3,"value"]],template:function(t,w){1&t&&m._UZ(0,"ion-progress-bar",0),2&t&&m.Q6J("value",w.percent)},dependencies:[q.X7],styles:[".stepper[_ngcontent-%COMP%]{margin:0;padding:30px 0 0;list-style:none;color:#dbdbdb;display:table;table-layout:fixed;width:100%;font-size:.8em}.stepper[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:table-cell;text-align:center;position:relative}.step-icon[_ngcontent-%COMP%]{background-color:#dce1f2!important;border-radius:50%;height:20px;width:20px;text-align:center;flex-shrink:0;position:relative;font-weight:500;color:#49158c;margin:0 auto}.step-icon-active[_ngcontent-%COMP%]{background-color:#49158c!important;color:#fff!important}.step-icon-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.step-horizontal-line[_ngcontent-%COMP%]{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin-bottom:10px;min-width:30px;border-top-color:#0000001f}"]}),c})()},9003:(P,M,s)=>{s.r(M),s.d(M,{TripPageModule:()=>E});var m=s(9808),q=s(4182),u=s(9928),c=s(3769),_=s(655),t=s(5e3),w=s(1892),C=s(7556),A=s(2522);function U(i,r){1&i&&t._UZ(0,"img",34)}function I(i,r){1&i&&t._UZ(0,"img",35)}function S(i,r){1&i&&t._UZ(0,"img",36)}function O(i,r){1&i&&(t.TgZ(0,"ion-item",19)(1,"ion-icon"),t._UZ(2,"img",23),t.qZA(),t.TgZ(3,"div",21)(4,"span",22),t._uU(5,"DILIGENCIA"),t.qZA()()())}function D(i,r){if(1&i&&(t.TgZ(0,"ion-item",37)(1,"div",38),t._UZ(2,"img",39),t.qZA(),t.TgZ(3,"div",40)(4,"fieldset",41),t._uU(5),t.qZA()()()),2&i){const n=r.$implicit,e=r.index,o=t.oxw();t.xp6(2),t.Q6J("src","assets/imgs/markers/"+o.az_arr[e]+".png",t.LSH),t.xp6(3),t.hij(" ",n.address," ")}}const N=[{path:"",component:(()=>{class i{constructor(n,e,o){this.ui=n,this.router=e,this.auth=o,this.quotation={},this.address_arr=[{address:"",description:"",contact_name:"",contact_phone:"",latitude:"",longitude:"",hover:!1},{address:"",description:"",contact_name:"",contact_phone:"",latitude:"",longitude:"",hover:!1}],this.az_arr=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],this.distance=0,this.duration=0,this.duration_text="",this.distance_text="",this.unity=""}ngOnInit(){localStorage.setItem("step","5")}ionViewWillEnter(){this.hideCart(),localStorage.getItem("quotation")&&(this.quotation=JSON.parse(localStorage.getItem("quotation")),this.loadMap())}hideCart(){this.auth.person.hide_cart=!0,this.auth.setPerson(this.auth.person)}next(){this.duration=Number(this.duration>=3600?(this.duration/3600).toFixed(0):(this.duration/60).toFixed(0)),this.quotation.distance=this.distance,this.quotation.duration=this.duration,this.quotation.duration_text=this.duration_text,this.quotation.distance_text=this.distance_text,this.quotation.unity=this.unity,localStorage.setItem("quotation",JSON.stringify(this.quotation)),this.router.navigate(["/tabs/select-time"])}loadMap(){return(0,_.mG)(this,void 0,void 0,function*(){this.distance=0,this.duration=0,this.duration_text="0 min",this.distance_text="0 km",this.loader=yield this.ui.loading("Por favor espere...");var n=new google.maps.DirectionsService,e=new google.maps.DirectionsRenderer({suppressMarkers:!0}),o=[],d=[],l=[];for(let a=0;a<this.quotation.address_arr.length;a++)o.push({location:{lat:this.quotation.address_arr[a].latitude,lng:this.quotation.address_arr[a].longitude},stopover:!0});var g=new google.maps.Map(document.getElementById("map"),{zoom:6,center:{lat:o[0].location.lat,lng:o[0].location.lng},rotateControl:!1,mapTypeControl:!1,streetViewControl:!1});e.setMap(g);var x=new google.maps.InfoWindow;for(let a=0;a<this.quotation.address_arr.length;a++){let f=new google.maps.Marker({position:{lat:this.quotation.address_arr[a].latitude,lng:this.quotation.address_arr[a].longitude},map:g,icon:"../../../assets/imgs/markers/"+this.az_arr[a]+".png"});d.push(f),l.push(this.quotation.address_arr[a].address),google.maps.event.addListener(f,"click",function(T,F){return function(){x.setContent(l[F]),x.open(g,T)}}(f,a))}let h,y,b,v=this.quotation.address_arr.length-1;!0===this.quotation.round_trip?(h={lat:o[0].location.lat,lng:o[0].location.lng},y={lat:o[0].location.lat,lng:o[0].location.lng},b={lat:o[v].location.lat,lng:o[v].location.lng},this.getDistanceMatrix(b,h)):(h={lat:o[0].location.lat,lng:o[0].location.lng},y={lat:o[v].location.lat,lng:o[v].location.lng});var Z=this;n.route({origin:h,destination:y,waypoints:o,travelMode:google.maps.TravelMode.DRIVING},function(a,p){return(0,_.mG)(this,void 0,void 0,function*(){(yield Z.loader).dismiss(),p===google.maps.DirectionsStatus.OK?e.setDirections(a):(console.log("Ha fallat la comunicaci\xf3 amb el mapa a causa de: "+p),yield Z.ui.presentAlert({mode:"ios",header:"No se ha podido mostrar las dirreciones, por favor intentelo de nuevo",buttons:[{text:"Aceptar",role:"cancel",cssClass:"secondary",handler:f=>{Z.router.navigate(["tabs/select-address"])}}]}))})});for(let a=0;a<o.length;a++){let p=null,f=null;a<o.length-1&&(p={lat:o[a].location.lat,lng:o[a].location.lng});let T=a+1;T<=o.length-1&&(f={lat:o[T].location.lat,lng:o[T].location.lng}),null!=p&&null!=f&&this.getDistanceMatrix(p,f)}})}getDistanceMatrix(n,e,o){var d=new google.maps.DistanceMatrixService,l=this;d.getDistanceMatrix({origins:[n],destinations:[e],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},function(g,x){return(0,_.mG)(this,void 0,void 0,function*(){if(x!=google.maps.DistanceMatrixStatus.OK)console.log("Error was: "+x),yield l.ui.presentAlert({mode:"ios",header:"No se ha podido mostrar la informaci\xf3n",buttons:[{text:"Aceptar",role:"cancel",cssClass:"secondary",handler:h=>{}}]});else try{const{duration:y}=g.rows[0].elements[0];console.log("Response",g.rows[0].elements[0]);let b=g.rows[0].elements[0].distance.text,v=g.rows[0].elements[0].distance.value;console.log("Distance Text",b);let Z=y.value;l.distance_text=b,l.unity=v>1e3?"Km":"m",l.getCalculateDistance(v,Z)}catch(h){console.log("error",h)}})})}getCalculateDistance(n,e){let d,l;console.log("Duration",e),console.log("Distance",n),this.distance+=n>1e3?Math.round(Number(n/1e3)):Math.round(Number(n)),Number(e),this.duration+=e,this.duration>=3600?(d=(this.duration/3600).toFixed(0),l=this.duration-3600>=60?((this.duration-3600)/60).toFixed(0):1..toFixed(0)):l=(this.duration/60).toFixed(0);const g=1==Number(d)?" hora":this.duration<3600?"":" horas",x=1==Number(l)?" minuto":" minutos";d=d||"",this.duration_text=d+g+" "+l+x}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(w.F),t.Y36(c.F0),t.Y36(C.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-trip"]],decls:57,vars:13,consts:[[1,"col-md-12"],[1,"col-5","m-auto"],[1,"col-md-11","col-lg-10","col-xl-8",2,"text-align","center","width","80%","margin","auto"],[2,"background","#eeeeee","color","gray","/* padding-right","90px","*/\n    /* padding-left","90px","*/\n    padding","7px","border-radius","30px","font-size","19px","display","block","width","100%","text-align","center","margin","10px auto"],["id","map",2,"width","100%","height","50%"],["map",""],[1,"col-md-5","col-xs-11",2,"max-height","89%","height","89%"],[2,"width","80%","margin","8px auto"],[1,"row"],[1,"col-sm-4","col-xs-12","justify-content-center",2,"color","#4992e7","font-family","Gilroy-ExtraBold","font-size","19px","text-align","center","width","33.3333333%"],["class","summary-icon","src","assets/imgs/moton-icon.png",4,"ngIf"],["class","summary-icon","src","assets/imgs/carryn-icon.png",4,"ngIf"],["class","summary-icon","src","assets/imgs/carn-icon.png",4,"ngIf"],[1,"col-sm-4","col-xs-12","justify-content-center",2,"color","#f5a448","font-family","Gilroy-ExtraBold","text-align","center","width","33.3333333%"],["src","assets/imgs/kmsn-icon.png",1,"summary-icon"],[1,"col-sm-4","col-xs-12","justify-content-center",2,"color","#6cc286","font-family","Gilroy-ExtraBold","text-align","center","width","33.3333333%"],["src","assets/imgs/timen-icon.png",1,"summary-icon"],[2,"background","#f2f2f2","border-radius","20px","width","80%","margin","auto"],[2,"text-align","left !important","font-size","22px !important","margin","0","padding","0","border-radius","20px"],["lines","none",2,"height","40px","--background","#f2f2f2"],["src","assets/imgs/city-icon.png"],["mat-line","",2,"font-size","15px","font-family","Gilroy-Light"],[2,"color","#49158a","font-size","15px","font-family","Gilroy-ExtraBold"],["src","assets/imgs/type-icon.png"],["lines","none","style","height: 40px;    --background: #f2f2f2; ",4,"ngIf"],[2,"background","#f2f2f2","width","80%","max-height","202px","margin","auto","overflow-y","scroll","border-radius","20px","padding","5px"],[2,"text-align","left !important","padding-top","1px","background","#f2f2f2","/* height","202px","*/\n       border-bottom-left-radius","20px","border-bottom-right-radius","20px","width","100%","max-height","202px","overflow-y","scroll"],["lines","none","style","\n   margin: 0;\n   margin-bottom: 10px;\n   --background: #f2f2f2;",4,"ngFor","ngForOf"],[1,"col-md-11","col-lg-10","col-xl-8","m-auto",2,"margin","auto"],["mode","ios","routerLink","/tabs/select-address"],["slot","start","name","chevron-back-outline"],["name","arrow-left"],["mode","ios",3,"click"],["slot","end","name","chevron-forward-outline"],["src","assets/imgs/moton-icon.png",1,"summary-icon"],["src","assets/imgs/carryn-icon.png",1,"summary-icon"],["src","assets/imgs/carn-icon.png",1,"summary-icon"],["lines","none",2,"margin","0","margin-bottom","10px","--background","#f2f2f2"],[1,"address-btn","text-center"],[2,"width","30px !important","height","30px !important",3,"src"],["mat-line",""],[2,"border-radius","12px","border-color","#dfdfdf","height","100%","padding-left","20px","font-size","0.75em"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-stepper"),t.qZA()(),t.TgZ(3,"div",2)(4,"span",3),t._uU(5,"Resumen del servicio"),t.qZA()(),t.TgZ(6,"ion-content"),t._UZ(7,"div",4,5),t.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9),t.YNc(13,U,1,0,"img",10),t.YNc(14,I,1,0,"img",11),t.YNc(15,S,1,0,"img",12),t._UZ(16,"br"),t._uU(17),t.qZA(),t.TgZ(18,"div",13),t._UZ(19,"img",14)(20,"br"),t._uU(21),t.ALo(22,"uppercase"),t.qZA(),t.TgZ(23,"div",15),t._UZ(24,"img",16)(25,"br"),t._uU(26),t.qZA()()(),t._UZ(27,"br"),t.TgZ(28,"div",17)(29,"ion-list",18)(30,"ion-item",19)(31,"ion-icon"),t._UZ(32,"img",20),t.qZA(),t.TgZ(33,"div",21)(34,"span",22),t._uU(35,"Ciudad:"),t.qZA(),t._uU(36),t.qZA()(),t.TgZ(37,"ion-item",19)(38,"ion-icon"),t._UZ(39,"img",23),t.qZA(),t.TgZ(40,"div",21)(41,"span",22),t._uU(42,"Tipo:"),t.qZA(),t._uU(43),t.qZA()(),t.YNc(44,O,6,0,"ion-item",24),t.qZA()(),t._UZ(45,"br"),t.TgZ(46,"div",25)(47,"ion-list",26),t.YNc(48,D,6,2,"ion-item",27),t.qZA()()()(),t.TgZ(49,"div",28)(50,"ion-button",29),t._UZ(51,"ion-icon",30)(52,"ion-icon",31),t._uU(53," Atr\xe1s "),t.qZA(),t.TgZ(54,"ion-button",32),t.NdJ("click",function(){return e.next()}),t._UZ(55,"ion-icon",33),t._uU(56," Siguiente "),t.qZA()()),2&n&&(t.xp6(13),t.Q6J("ngIf","Motorizado"==e.quotation.transport_type),t.xp6(1),t.Q6J("ngIf","Carry"==e.quotation.transport_type),t.xp6(1),t.Q6J("ngIf","Autom\xf3vil"==e.quotation.transport_type),t.xp6(2),t.hij(" ",e.quotation.transport_type," "),t.xp6(4),t.AsE(" ",e.distance," ",t.lcZ(22,11,e.unity)," "),t.xp6(5),t.hij(" ",e.duration_text," "),t.xp6(10),t.hij(" ",e.quotation.city," "),t.xp6(7),t.hij(" ",e.quotation.round_trip?"Ida y Vuelta":"Solo ida"," "),t.xp6(1),t.Q6J("ngIf",e.quotation.diligence),t.xp6(4),t.Q6J("ngForOf",e.quotation.address_arr))},dependencies:[m.sg,m.O5,A.v,u.YG,u.W2,u.gu,u.Ie,u.q_,u.YI,c.rH,m.gd],styles:["span[_ngcontent-%COMP%]{margin-right:10px}ion-list[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{padding:0!important}"]}),i})()}];let k=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.Bz.forChild(N),c.Bz]}),i})();var z=s(8412);let E=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[m.ez,q.u5,z.j,u.Pc,k]}),i})()}}]);