"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1962,2522,7628,8006],{2522:(Z,c,n)=>{n.d(c,{v:()=>p});var r=n(5e3),_=n(9928);let p=(()=>{class g{constructor(){this.step=1,this.percent=0}ngOnInit(){console.log("Stepper ng oninit"),localStorage.getItem("step")&&(this.step=Number(localStorage.getItem("step")),this.percent=Number(this.step/8))}}return g.\u0275fac=function(t){return new(t||g)},g.\u0275cmp=r.Xpm({type:g,selectors:[["app-stepper"]],decls:1,vars:1,consts:[[2,"height","5px","--background","transparent","min-width","100%",3,"value"]],template:function(t,x){1&t&&r._UZ(0,"ion-progress-bar",0),2&t&&r.Q6J("value",x.percent)},dependencies:[_.X7],styles:[".stepper[_ngcontent-%COMP%]{margin:0;padding:30px 0 0;list-style:none;color:#dbdbdb;display:table;table-layout:fixed;width:100%;font-size:.8em}.stepper[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:table-cell;text-align:center;position:relative}.step-icon[_ngcontent-%COMP%]{background-color:#dce1f2!important;border-radius:50%;height:20px;width:20px;text-align:center;flex-shrink:0;position:relative;font-weight:500;color:#49158c;margin:0 auto}.step-icon-active[_ngcontent-%COMP%]{background-color:#49158c!important;color:#fff!important}.step-icon-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.step-horizontal-line[_ngcontent-%COMP%]{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin-bottom:10px;min-width:30px;border-top-color:#0000001f}"]}),g})()},1962:(Z,c,n)=>{n.r(c),n.d(c,{SummaryPageModule:()=>I});var r=n(9808),_=n(4182),p=n(9928),g=n(3769),d=n(655),t=n(5e3),x=n(1335),q=n(1892),v=n(7326),U=n(7556),A=n(8337),T=n(2522);function S(o,a){1&o&&t._UZ(0,"img",47)}function P(o,a){1&o&&t._UZ(0,"img",48)}function w(o,a){1&o&&t._UZ(0,"img",49)}function C(o,a){1&o&&(t.TgZ(0,"ion-item",15),t._UZ(1,"img",50),t.TgZ(2,"p",51)(3,"span",52),t._uU(4,"Diligencia"),t.qZA()()())}function M(o,a){if(1&o&&(t.TgZ(0,"ion-item",53)(1,"div",54),t._UZ(2,"img",55),t.qZA(),t.TgZ(3,"div",56)(4,"fieldset",57),t._uU(5),t.qZA()()()),2&o){const e=a.$implicit,i=a.index,u=t.oxw();t.xp6(2),t.Q6J("src","assets/imgs/markers/"+u.az_arr[i]+".png",t.LSH),t.xp6(3),t.hij(" ",e.address," ")}}function k(o,a){if(1&o&&(t.TgZ(0,"ion-item",34)(1,"div",35)(2,"span",36),t._uU(3,"Descuento por cup\xf3n:"),t.qZA(),t._uU(4),t.ALo(5,"currency"),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.hij(" - ",t.gM2(5,1,e.total_discount,"","symbol","1.0")," ")}}const z=[{path:"",component:(()=>{class o{constructor(e,i,u,l,m,f){this.request=e,this.ui=i,this.router=u,this.price=l,this.auth=m,this.errorS=f,this.loading=!1,this.quotation={},this.address_arr=[{address:"",description:"",latitude:"",longitude:"",hover:!1},{address:"",description:"",latitude:"",longitude:"",hover:!1}],this.az_arr=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],this.total=0,this.kmadd_base_total=0,this.neighboring=0,this.rate_base=5300,this.kmadd_base=1035,this.neighboring_base=0,this.distance=0,this.duration=0,this.price_per_transport_type={},this.taxes={},this.total_discount=0,this.transport_type_id=4,this.configuration_data={}}ngOnInit(){localStorage.setItem("step","7")}hideCart(){this.auth.person.hide_cart=!0,this.auth.setPerson(this.auth.person)}ionViewDidEnter(){return(0,d.mG)(this,void 0,void 0,function*(){this.hideCart(),localStorage.setItem("step","7");const e=yield this.ui.loading("Por favor espere...");this.request.get("get_pricing_for_order").subscribe(i=>(0,d.mG)(this,void 0,void 0,function*(){if((yield e).dismiss(),localStorage.getItem("quotation")){this.quotation=JSON.parse(localStorage.getItem("quotation")),this.transport_type_id=this.quotation.transport_type_id,console.log("Configuration Data",this.auth.user.configuration_data),this.configuration_data=this.auth.user.configuration_data.find(s=>s.transport_type_id==this.quotation.transport_type_id),this.configuration_data||(this.configuration_data=i.data.find(s=>s.transport_type_id==this.quotation.transport_type_id)),localStorage.setItem("configuration_data",JSON.stringify(this.configuration_data));let u=Number(this.configuration_data.rate_base);this.rate_base=u;let l=Number(this.configuration_data.minimal_distance?this.configuration_data.minimal_distance:this.configuration_data.km_base),m=Number(this.configuration_data.value_per_distance?this.configuration_data.value_per_distance:this.configuration_data.km_unit_value),f=Number(this.configuration_data.peripheries?this.configuration_data.peripheries:this.configuration_data.neighboring_base);this.rate_base=Number(this.configuration_data.rate_base),this.neighboring_base=f,this.quotation.address_arr.length>0&&(this.address_arr=this.quotation.address_arr),this.quotation.distance=Math.round(this.quotation.distance),console.log("Unity",this.quotation.unity.toLowerCase());const h=this.quotation.unity&&"km"!=this.quotation.unity.toLowerCase()?this.quotation.distance/1e3:this.quotation.distance;if(h>l?"Motorizado"==this.quotation.transport_type||"Carry"==this.quotation.transport_type?(this.kmadd_base_total=Math.abs(h-l)*m,this.kmadd_base_total=Math.round(this.kmadd_base_total)):"Autom\xf3vil"==this.quotation.transport_type&&(this.kmadd_base_total=m*Math.abs(h-l)+Math.abs(h-l)*(.25*m),this.kmadd_base_total=Math.round(this.kmadd_base_total),console.log("Distance charge",this.kmadd_base_total)):this.kmadd_base_total=0,this.quotation.address_arr.length>0){for(let s=0;s<this.quotation.address_arr.length;s++){this.quotation.address_arr[s].address.split(",");const y=this.quotation.address_arr[s].address.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),b=this.quotation.city.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(" d.c.","");console.log("City address",y,"City",b,"Includes",!y.includes(b)),y.includes(b)||(this.neighboring=1)}console.log(this.quotation.distance,this.quotation.transport_type,this.neighboring,f)}if(this.total=yield this.price.calculate_price(h,this.quotation.transport_type,this.neighboring,this.quotation.diligence,this.transport_type_id),this.quotation.couponRedimi&&(this.coupon=this.quotation.coupon,this.coupon)){let s=0;s=40==this.coupon.type_value_id?this.quotation.total+Number(this.coupon.value):this.quotation.total+this.quotation.total*(Number(this.coupon.value)/100),40==this.coupon.type_value_id?Number(this.coupon.value)<=s?(this.total_discount=Number(this.coupon.value),this.total=this.total-this.total_discount):(this.total_discount=this.total,this.total=0):this.total_discount=this.quotation.total*(Number(this.coupon.value)/100)}}}),i=>(0,d.mG)(this,void 0,void 0,function*(){(yield e).dismiss(),this.errorS.response(i)}))})}payment(){this.quotation.total=this.total,this.quotation.rate_base=this.rate_base,this.quotation.kmadd_base_total=this.kmadd_base_total,this.quotation.neighboring_base=this.neighboring?this.neighboring_base:0,localStorage.setItem("quotation",JSON.stringify(this.quotation)),this.router.navigate(["/tabs/select-payment"])}transform(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.s),t.Y36(q.F),t.Y36(g.F0),t.Y36(v.N),t.Y36(U.e),t.Y36(A.Y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-summary"]],decls:120,vars:24,consts:[[1,"row","justify-content-center"],[1,"col-md-11","col-lg-10","col-xl-8"],[2,"background","#eeeeee","color","gray","/* padding-right","90px","*/\n    /* padding-left","90px","*/\n    padding","0 16px","border-radius","30px","font-size","1.2em","display","block","width","100%","text-align","inherit","margin","8px auto 0 auto"],[1,"col-md-6","col-xs-12"],[2,"width","80%","margin","8px auto"],[1,"row"],[1,"col-xs-4","justify-content-center",2,"color","#4992e7","font-family","Gilroy-ExtraBold","font-size","19px","text-align","center","width","33.3333333%"],["src","assets/imgs/pay-icon.png",1,"summary-icon"],[1,"col-xs-4","justify-content-center",2,"color","#f5a448","font-family","Gilroy-ExtraBold","font-size","19px","text-align","center","width","33.3333333%"],["src","assets/imgs/kmsn-icon.png",1,"summary-icon"],[1,"col-xs-4","justify-content-center",2,"color","#6cc286","font-family","Gilroy-ExtraBold","font-size","19px","text-align","center","width","33.3333333%"],["src","assets/imgs/timen-icon.png",1,"summary-icon"],[1,"page-title"],[1,"col-md-10","col-xs-10",2,"background","#f2f2f2","/* border","0.5px solid red","*/\n    border-radius","20px","/* border-radius","15px 0px 0px 15px","*/\n    /* box-shadow","5px 5px 5px 5px #888","*/\n    width","80%","margin","auto"],[2,"text-align","left !important","font-size","22px !important","background","#f2f2f2","border-radius","20px"],["lines","none",2,"padding","10px","--background","#f2f2f2","height","40px"],["src","assets/imgs/typeservice-icon.png",2,"width","30px","height","30px","margin-right","10px"],["mat-line","",2,"font-size","0.9em","font-family","Gilroy-Light","text-align","right","width","90%"],[2,"float","left","color","#49158a","font-size","0.9em","font-family","Gilroy-ExtraBold"],["src","assets/imgs/motorizado-icon.png","style","    width: 30px;\n                height: 30px;\n                margin-right: 10px;",4,"ngIf"],["src","assets/imgs/carrysm-icon.png","style","    width: 30px;\n                height: 30px;\n                margin-right: 10px;",4,"ngIf"],["src","assets/imgs/carro-icon.png","style","    width: 30px;\n                height: 30px;\n                margin-right: 10px;",4,"ngIf"],[2,"text-align","right","width","90%"],["src","assets/imgs/city-icon.png",2,"width","30px","height","30px","margin-right","10px"],[2,"color","#49158a","font-size","0.9em","font-family","Gilroy-ExtraBold","float","left"],["src","assets/imgs/type-icon.png",2,"width","40px","height","40px"],["src","assets/imgs/date-con.png",2,"width","30px","height","30px","margin-right","10px"],["src","assets/imgs/hour-icon.png",2,"width","30px","height","30px","margin-right","10px"],["lines","none","style","padding: 10px;--background: #f2f2f2;height: 40px;",4,"ngIf"],[2,"text-align","left !important","padding-top","1px","background","#f2f2f2","/* height","202px","*/\n          border-bottom-left-radius","20px","border-bottom-right-radius","20px","width","100%","max-height","202px","overflow-y","scroll"],["lines","none","style","\n      margin: 0;\n      margin-bottom: 10px;\n      --background: #f2f2f2;",4,"ngFor","ngForOf"],[1,"page-title",2,"margin-top","10px","margin-bottom","0"],[1,"col-md-10","col-xs-10",2,"background","#f2f2f2","/* border","0.5px solid red","*/\n    border-radius","20px","/* border-radius","15px 0px 0px 15px","*/\n    /* box-shadow","5px 5px 5px 5px #888","*/\n    width","80%","margin","10px auto"],[2,"text-align","left !important","background","#f2f2f2","border-radius","20px"],["lines","none",2,"--background","#f2f2f2","height","30px","padding","5px !important","/* min-height","50px","*/\n            font-size","0.9em"],["mat-line","",2,"text-align","right","font-size","1.1em","font-family","Gilroy-Light","height","40px","width","100%"],[2,"float","left","color","#49158a","font-size","0.9em","font-family","Gilroy-Light"],["slot","end"],["lines","none","style","    --background: #f2f2f2;\n            height: 30px;\n            padding: 5px !important;\n            /* min-height: 50px; */\n            font-size: 0.9em;",4,"ngIf"],["mat-line","",2,"text-align","right","background-color","#48158e","color","white","font-size","15px","border-radius","14px","padding","7px","width","80%","margin","auto","font-family","Gilroy-Light"],[2,"float","left","font-size","15px","font-family","Gilroy-Light"],[1,"col-md-11","col-lg-10","col-xl-8","m-auto",2,"margin","auto"],["mode","ios","fill","outline","routerLink","/tabs/select-time"],["slot","start","name","chevron-back-outline"],["name","arrow-left"],["mode","ios",3,"click"],["slot","end","name","chevron-forward-outline"],["src","assets/imgs/motorizado-icon.png",2,"width","30px","height","30px","margin-right","10px"],["src","assets/imgs/carrysm-icon.png",2,"width","30px","height","30px","margin-right","10px"],["src","assets/imgs/carro-icon.png",2,"width","30px","height","30px","margin-right","10px"],["src","assets/imgs/type-icon.png",2,"width","30px","height","30px","margin-right","10px"],[2,"width","90%"],[2,"color","#49158a","font-size","0.9em","font-family","Gilroy-ExtraBold"],["lines","none",2,"margin","0","margin-bottom","10px","--background","#f2f2f2"],[1,"address-btn","text-center"],[2,"width","30px !important","height","30px !important",3,"src"],["mat-line",""],[2,"border-radius","12px","border-color","#dfdfdf","height","100%","padding-left","20px","font-size","0.75em"]],template:function(e,i){1&e&&(t._UZ(0,"app-stepper"),t.TgZ(1,"ion-content")(2,"div",0)(3,"div",1)(4,"span",2),t._uU(5,"Resumen del servicio"),t.qZA()(),t.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6),t._UZ(10,"img",7)(11,"br"),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._UZ(14,"img",9)(15,"br"),t._uU(16),t.ALo(17,"uppercase"),t.qZA(),t.TgZ(18,"div",10),t._UZ(19,"img",11)(20,"br"),t._uU(21),t.ALo(22,"titlecase"),t.qZA()()(),t.TgZ(23,"div",0)(24,"div",12),t._uU(25," Resumen "),t.qZA(),t.TgZ(26,"div",13)(27,"ion-list",14)(28,"ion-item",15),t._UZ(29,"img",16),t.TgZ(30,"div",17)(31,"span",18),t._uU(32,"Tipo de servicio:"),t.qZA(),t._uU(33),t.qZA()(),t.TgZ(34,"ion-item",15),t.YNc(35,S,1,0,"img",19),t.YNc(36,P,1,0,"img",20),t.YNc(37,w,1,0,"img",21),t.TgZ(38,"p",22)(39,"span",18),t._uU(40,"Tipo de transporte:"),t.qZA(),t._uU(41),t.qZA()(),t.TgZ(42,"ion-item",15),t._UZ(43,"img",23),t.TgZ(44,"p",22)(45,"span",24),t._uU(46,"Ciudad:"),t.qZA(),t._uU(47),t.qZA()(),t.TgZ(48,"ion-item",15),t._UZ(49,"img",25),t.TgZ(50,"p",22)(51,"span",24),t._uU(52,"Tipo:"),t.qZA(),t._uU(53),t.qZA()(),t.TgZ(54,"ion-item",15),t._UZ(55,"img",26),t.TgZ(56,"p",22)(57,"span",24),t._uU(58,"Fecha:"),t.qZA(),t._uU(59),t.qZA()(),t.TgZ(60,"ion-item",15),t._UZ(61,"img",27),t.TgZ(62,"p",22)(63,"span",24),t._uU(64,"Hora:"),t.qZA(),t._uU(65),t.qZA()(),t.YNc(66,C,5,0,"ion-item",28),t.qZA(),t.TgZ(67,"ion-list",29),t.YNc(68,M,6,2,"ion-item",30),t.qZA()()(),t.TgZ(69,"div",0)(70,"div",31),t._uU(71," Valor Servicio "),t.qZA(),t.TgZ(72,"div",32)(73,"ion-list",33)(74,"ion-item",34)(75,"div",35)(76,"span",36),t._uU(77,"Tarifa base:"),t.qZA(),t.TgZ(78,"ion-label",37),t._uU(79),t.qZA()()(),t.TgZ(80,"ion-item",34)(81,"div",35)(82,"span",36),t._uU(83,"Recargo por distancia:"),t.qZA(),t._uU(84),t.qZA()(),t.TgZ(85,"ion-item",34)(86,"div",35)(87,"span",36),t._uU(88,"Valor declarado:"),t.qZA(),t._uU(89," $ 0 "),t.qZA()(),t.TgZ(90,"ion-item",34)(91,"div",35)(92,"span",36),t._uU(93,"Periferias:"),t.qZA(),t._uU(94),t.qZA()(),t.TgZ(95,"ion-item",34)(96,"div",35)(97,"span",36),t._uU(98,"Tiempo en espera:"),t.qZA(),t._uU(99," $ 0 "),t.qZA()(),t.TgZ(100,"ion-item",34)(101,"div",35)(102,"span",36),t._uU(103,"Otros:"),t.qZA(),t._uU(104," $ 0 "),t.qZA()(),t.YNc(105,k,6,6,"ion-item",38),t.qZA()()()()()(),t.TgZ(106,"div",39)(107,"span",40)(108,"strong"),t._uU(109,"Total:"),t.qZA()(),t.TgZ(110,"strong"),t._uU(111),t.qZA()(),t.TgZ(112,"div",41)(113,"ion-button",42),t._UZ(114,"ion-icon",43)(115,"ion-icon",44),t._uU(116," Atr\xe1s "),t.qZA(),t.TgZ(117,"ion-button",45),t.NdJ("click",function(){return i.payment()}),t._UZ(118,"ion-icon",46),t._uU(119," Pagar "),t.qZA()()),2&e&&(t.xp6(12),t.hij(" ","$ "+i.transform(i.total)," "),t.xp6(4),t.AsE(" ",i.quotation.distance," ",t.lcZ(17,20,i.quotation.unity)," "),t.xp6(5),t.hij(" ",t.lcZ(22,22,i.quotation.duration_text)," "),t.xp6(12),t.hij(" ",i.quotation.service_type," "),t.xp6(2),t.Q6J("ngIf","Motorizado"==i.quotation.transport_type),t.xp6(1),t.Q6J("ngIf","Carry"==i.quotation.transport_type),t.xp6(1),t.Q6J("ngIf","Autom\xf3vil"==i.quotation.transport_type),t.xp6(4),t.Oqu(i.quotation.transport_type),t.xp6(6),t.hij(" ",i.quotation.city," "),t.xp6(6),t.hij(" ",i.quotation.round_trip?"Ida y Vuelta":"Solo ida"," "),t.xp6(6),t.hij(" ",i.quotation.date," "),t.xp6(6),t.hij(" ",i.quotation.hour," "),t.xp6(1),t.Q6J("ngIf",i.quotation.diligence),t.xp6(2),t.Q6J("ngForOf",i.quotation.address_arr),t.xp6(11),t.Oqu("$ "+i.transform(i.rate_base)),t.xp6(5),t.hij(" ","$ "+i.transform(i.kmadd_base_total)," "),t.xp6(10),t.hij(" $ ",i.neighboring?i.neighboring_base:0," "),t.xp6(11),t.Q6J("ngIf",i.quotation.couponRedimi),t.xp6(6),t.Oqu("$ "+i.transform(i.total)))},dependencies:[r.sg,r.O5,p.YG,p.W2,p.gu,p.Ie,p.Q$,p.q_,p.YI,T.v,g.rH,r.gd,r.rS,r.H9],styles:["span[_ngcontent-%COMP%]{margin-right:10px}ion-list[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{padding:0!important}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px!important;height:20px!important;margin-right:5px}"]}),o})()}];let O=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.Bz.forChild(z),g.Bz]}),o})();var N=n(8412);let I=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[r.ez,_.u5,p.Pc,N.j,O]}),o})()}}]);